{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\lun-vue-admin-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\lun-vue-admin-master\\src\\views\\authority\\user\\components\\addOrEditDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\lun-vue-admin-master\\src\\views\\authority\\user\\components\\addOrEditDialog.vue","mtime":1646805521000},{"path":"C:\\Users\\Administrator\\Desktop\\lun-vue-admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\lun-vue-admin-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\lun-vue-admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\lun-vue-admin-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGFkZFVzZXIsIGVkaXRVc2VyIH0gZnJvbSAnQC9hcGkvdXNlcicKaW1wb3J0IHsgZ2V0Um9sZXMgfSBmcm9tICdAL2FwaS9yb2xlJwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFkZERpYWxvZyIsCiAgY29tcG9uZW50czoge30sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJvbGVzTGlzdDogW10sIC8v6KeS6Imy5YiX6KGoCiAgICAgIHR5cGU6IDEsIC8vMeaWsOWinu+8jDLnvJbovpEKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgICAgYXZhdGFyOiAiIiwKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBwaG9uZTogIiIsCiAgICAgICAgYWRkcjogIiIsCiAgICAgICAgYmlydGg6ICIiLAogICAgICAgIHNleDogIjAiLAogICAgICAgIHN0YXRlOiB0cnVlLAogICAgICAgIGVtYWlsOiAiIiwKICAgICAgICByb2xlczogW10sCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgdXNlcm5hbWU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6LSm5Y+35LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgeyBwYXR0ZXJuOiAvXlthLXowLTldezQsMTB9JC8sIG1lc3NhZ2U6ICfotKblj7fnlLEgNC0xMCDkuKrlsI/lhpnlrZfmr43lkozmlbDlrZfnu4TmiJAnLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgICAgcGFzc3dvcmQ6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5a+G56CB5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgeyBwYXR0ZXJuOiAvXlthLXpBLVowLTldezYsMTh9JC8sIG1lc3NhZ2U6ICflr4bnoIHnlLEgNi0xOCDkuKrlpKflsI/lhpnlrZfmr43lkozmlbDlrZfnu4TmiJAnLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgICAgbmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICflp5PlkI3kuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICB7IHBhdHRlcm46IC9eW2EtekEtWjAtOVx1NGUwMC1cdTlmYTVdezIsNH0kLywgbWVzc2FnZTogJ+Wnk+WQjeeUsSAyLTQg5Liq5rGJ5a2X57uE5oiQJywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgIHBob25lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+aJi+acuuWPt+S4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgIHsgcGF0dGVybjogL14xWzM0NTY3ODldXGR7OX0kLywgbWVzc2FnZTogJ+aJi+acuuWPt+agvOW8j+S4jeato+ehricsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgfSwKICAgICAgcmFuZ2VEYXRlOiB7IC8v5pel5pyf6IyD5Zu06YCJ5oup77yM5Y+q6IO96YCJ5oup5b2T5YmN5pel5pyf5Lul5YmN55qECiAgICAgICAgZGlzYWJsZWREYXRlKGRhdGUpIHsKICAgICAgICAgIHJldHVybiBkYXRlLmdldFRpbWUoKSA+IERhdGUubm93KCkKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuZ2V0Um9sZXNMaXN0KCk7IC8v6I635Y+W6KeS6ImyCiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CgogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgZ2V0Um9sZXNMaXN0KCkgewogICAgICBsZXQgcmVzID0gYXdhaXQgZ2V0Um9sZXMoKTsKICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgdGhpcy5yb2xlc0xpc3QgPSByZXMuZGF0YQogICAgICB9CiAgICB9LAogICAgc2hvdyh0eXBlLCByb3cpIHsKICAgICAgdGhpcy50eXBlID0gdHlwZTsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgaWYgKHR5cGUgPT0gMikgewogICAgICAgIHJvdy5zZXggPSByb3cuc2V4ICsgJyc7CiAgICAgICAgdGhpcy5ydWxlRm9ybSA9IHJvdzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJ1bGVGb3JtID0gewogICAgICAgICAgaWQ6ICIiLAogICAgICAgICAgdXNlcm5hbWU6ICIiLAogICAgICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICAgICAgbmFtZTogIiIsCiAgICAgICAgICBwaG9uZTogIiIsCiAgICAgICAgICBhZGRyOiAiIiwKICAgICAgICAgIGJpcnRoOiAiIiwKICAgICAgICAgIHNleDogIjAiLAogICAgICAgICAgc3RhdGU6IHRydWUsCiAgICAgICAgICBlbWFpbDogIiIsCiAgICAgICAgICByb2xlczogW10sCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy4kcmVmcy5ydWxlRm9ybS5jbGVhclZhbGlkYXRlKCk7IC8v5YWz6Zet5riF56m65qCh6aqM6KeE5YiZCiAgICAgIH0pCiAgICB9LAogICAgc3VibWl0Rm9ybSgpIHsKICAgICAgdGhpcy4kcmVmcy5ydWxlRm9ybS52YWxpZGF0ZShhc3luYyAodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMucnVsZUZvcm0uYmlydGggPSBuZXcgRGF0ZSh0aGlzLnJ1bGVGb3JtLmJpcnRoKS5mb3JtYXQoInl5eXktTU0tZGQiKTsKICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT0gMSkgewogICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgYWRkVXNlcih0aGlzLnJ1bGVGb3JtKTsKICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmlrDlop7miJDlip8iKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IGVkaXRVc2VyKHRoaXMucnVsZUZvcm0pOwogICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIue8lui+keaIkOWKnyIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLiRwYXJlbnQuZ2V0VXNlckxpc3QoKTsKICAgICAgICAgIHRoaXMuY2xvc2UoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["addOrEditDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addOrEditDialog.vue","sourceRoot":"src/views/authority/user/components","sourcesContent":["<template>\n  <div class=\"AddDialog\">\n    <el-dialog :title=\"type==1?'新增':'编辑'\" :visible.sync=\"dialogVisible\" width=\"800px\" :close-on-click-modal=\"false\" @close=\"close\">\n      <el-form :model=\"ruleForm\" ref=\"ruleForm\" :rules=\"rules\" label-width=\"auto\">\n        <el-input type=\"hidden\" v-model=\"ruleForm.id\"></el-input>\n        <el-row :gutter=\"20\">\n          <el-col :span=\"12\">\n            <el-form-item label=\"账号\" prop=\"username\">\n              <el-input v-model=\"ruleForm.username\" placeholder=\"请输入账号\" :disabled=\"type==1?false:true\">\n              </el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"密码\" prop=\"password\">\n              <el-input v-model=\"ruleForm.password\" placeholder=\"请输入密码\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"姓名\" prop=\"name\">\n              <el-input v-model=\"ruleForm.name\" placeholder=\"请输入姓名\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"手机号\" prop=\"phone\">\n              <el-input v-model=\"ruleForm.phone\" placeholder=\"请输入手机号\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"性别\" prop=\"sex\">\n              <el-radio-group v-model=\"ruleForm.sex\">\n                <el-radio label=\"0\">男</el-radio>\n                <el-radio label=\"1\">女</el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"账号状态\" prop=\"state\">\n              <el-switch v-model=\"ruleForm.state\" active-text=\"启用\" inactive-text=\"禁用\"></el-switch>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"日期\" prop=\"birth\" :rules=\"[{ required: true, message: '日期不能为空', trigger: 'blur' }]\">\n              <el-date-picker type=\"date\" v-model=\"ruleForm.birth\" placeholder=\"请选择日期\" :picker-options=\"rangeDate\" format=\"yyyy-MM-dd\"></el-date-picker>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"地址\" prop=\"addr\">\n              <el-input v-model=\"ruleForm.addr\" placeholder=\"随机生成地址\" disabled></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"邮箱\" prop=\"email\">\n              <el-input v-model=\"ruleForm.email\" placeholder=\"随机生成邮箱\" disabled></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"角色\" prop=\"roles\" :rules=\"[{ required: true, message: '角色不能为空', trigger: 'blur' }]\">\n              <el-select v-model=\"ruleForm.roles\" multiple collapse-tags placeholder=\"请选择角色(可多选)\">\n                <el-option v-for=\"(item) in rolesList\" :value=\"item.name\" :label=\"item.title\" :key=\"item.id\"></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { addUser, editUser } from '@/api/user'\nimport { getRoles } from '@/api/role'\nexport default {\n  name: \"AddDialog\",\n  components: {},\n  data() {\n    return {\n      rolesList: [], //角色列表\n      type: 1, //1新增，2编辑\n      dialogVisible: false,\n      ruleForm: {\n        id: \"\",\n        username: \"\",\n        password: \"\",\n        avatar: \"\",\n        name: \"\",\n        phone: \"\",\n        addr: \"\",\n        birth: \"\",\n        sex: \"0\",\n        state: true,\n        email: \"\",\n        roles: [],\n      },\n      rules: {\n        username: [{ required: true, message: '账号不能为空', trigger: 'blur' },\n        { pattern: /^[a-z0-9]{4,10}$/, message: '账号由 4-10 个小写字母和数字组成', trigger: 'blur' }],\n        password: [{ required: true, message: '密码不能为空', trigger: 'blur' },\n        { pattern: /^[a-zA-Z0-9]{6,18}$/, message: '密码由 6-18 个大小写字母和数字组成', trigger: 'blur' }],\n        name: [{ required: true, message: '姓名不能为空', trigger: 'blur' },\n        { pattern: /^[a-zA-Z0-9\\u4e00-\\u9fa5]{2,4}$/, message: '姓名由 2-4 个汉字组成', trigger: 'blur' }],\n        phone: [{ required: true, message: '手机号不能为空', trigger: 'blur' },\n        { pattern: /^1[3456789]\\d{9}$/, message: '手机号格式不正确', trigger: 'blur' }],\n      },\n      rangeDate: { //日期范围选择，只能选择当前日期以前的\n        disabledDate(date) {\n          return date.getTime() > Date.now()\n        }\n      }\n    }\n  },\n  created: function () {\n    this.getRolesList(); //获取角色\n  },\n  mounted: function () {\n\n  },\n  methods: {\n    async getRolesList() {\n      let res = await getRoles();\n      if (res.status == 200) {\n        this.rolesList = res.data\n      }\n    },\n    show(type, row) {\n      this.type = type;\n      this.dialogVisible = true;\n      if (type == 2) {\n        row.sex = row.sex + '';\n        this.ruleForm = row;\n      } else {\n        this.ruleForm = {\n          id: \"\",\n          username: \"\",\n          password: \"\",\n          name: \"\",\n          phone: \"\",\n          addr: \"\",\n          birth: \"\",\n          sex: \"0\",\n          state: true,\n          email: \"\",\n          roles: [],\n        }\n      }\n    },\n    close() {\n      this.dialogVisible = false;\n      this.$nextTick(() => {\n        this.$refs.ruleForm.clearValidate(); //关闭清空校验规则\n      })\n    },\n    submitForm() {\n      this.$refs.ruleForm.validate(async (valid) => {\n        if (valid) {\n          this.ruleForm.birth = new Date(this.ruleForm.birth).format(\"yyyy-MM-dd\");\n          if (this.type == 1) {\n            let res = await addUser(this.ruleForm);\n            if (res.status == 200) {\n              this.$message.success(\"新增成功\");\n            }\n          } else {\n            let res = await editUser(this.ruleForm);\n            if (res.status == 200) {\n              this.$message.success(\"编辑成功\");\n            }\n          }\n          this.$parent.getUserList();\n          this.close();\n        } else {\n          return false;\n        }\n      });\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n"]}]}