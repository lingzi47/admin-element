{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\1\\预见未来后台管理系统\\后台\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\1\\预见未来后台管理系统\\后台\\src\\layout\\components\\TabsView.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\1\\预见未来后台管理系统\\后台\\src\\layout\\components\\TabsView.vue","mtime":1658486547541},{"path":"C:\\Users\\Administrator\\Desktop\\1\\预见未来后台管理系统\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\1\\预见未来后台管理系统\\后台\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\1\\预见未来后台管理系统\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\1\\预见未来后台管理系统\\后台\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUYWJzVmlldyIsCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWyJpc0NvbGxhcHNlIiwgInZpc2l0ZWRSb3V0ZXMiLCAidGFiQWN0aXZlIl0pLAogICAgYWN0aXZlTWVudTogewogICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy50YWJBY3RpdmU7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gKCkge30sCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIC8v55So5LqO5a6a5LmJ5bGe5oCnCiAgICByZXR1cm4gewogICAgICByaWdodFRhcE1lbnU6IHt9LAogICAgICBjb250ZXh0TWVudVZpc2libGU6IGZhbHNlLAogICAgICBsZWZ0OiAiIiwKICAgICAgdG9wOiAiIiwKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCB0aGlzLmNsb3NlQ29udGV4dE1lbnUpOwogIH0sCiAgbWV0aG9kczogewogICAgLy/nlKjkuo7lrprkuYnnmoTlh73mlbAKICAgIGhhbmRsZUxlZmVNZW51KCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgibWVudS9zZXRMZWZ0Q29sbGFwc2UiLCAhdGhpcy5pc0NvbGxhcHNlKTsKICAgIH0sCiAgICBoYW5kbGVDbGljayh0YWIpIHsKICAgICAgdGhpcy5nb1JvdXRlclBhdGgodGFiLm5hbWUpOwogICAgfSwKICAgIGdvUm91dGVyUGF0aChyb3V0ZU5hbWUpIHsKICAgICAgbGV0IHJvdXRlID0gdGhpcy52aXNpdGVkUm91dGVzLmZpbHRlcigKICAgICAgICAoaXRlbSkgPT4gaXRlbS5uYW1lID09IHJvdXRlTmFtZQogICAgICApWzBdOwogICAgICBpZiAodGhpcy4kcm91dGUucGF0aCAhPSByb3V0ZS5wYXRoKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogcm91dGUubmFtZSwKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHJlbW92ZVRhYih0YXJnZXROYW1lKSB7CiAgICAgIGxldCB0YWJzID0gdGhpcy52aXNpdGVkUm91dGVzOwogICAgICBsZXQgYWN0aXZlTmFtZSA9IHRoaXMudGFiQWN0aXZlOwogICAgICBpZiAoYWN0aXZlTmFtZSA9PT0gdGFyZ2V0TmFtZSkgewogICAgICAgIHRhYnMuZm9yRWFjaCgodGFiLCBpbmRleCkgPT4gewogICAgICAgICAgaWYgKHRhYi5uYW1lID09PSB0YXJnZXROYW1lKSB7CiAgICAgICAgICAgIGxldCBuZXh0VGFiID0gdGFic1tpbmRleCArIDFdIHx8IHRhYnNbaW5kZXggLSAxXTsKICAgICAgICAgICAgaWYgKG5leHRUYWIpIHsKICAgICAgICAgICAgICBhY3RpdmVOYW1lID0gbmV4dFRhYi5uYW1lOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgbGV0IGRlbFJvdXRlID0gdGFicy5maWx0ZXIoKHRhYikgPT4gdGFiLm5hbWUgPT0gdGFyZ2V0TmFtZSlbMF07CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJtZW51L2RlbFZpZXciLCBkZWxSb3V0ZSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5nb1JvdXRlclBhdGgoYWN0aXZlTmFtZSk7CiAgICAgIH0pOwogICAgfSwKCiAgICBvcGVuQ29udGV4dE1lbnUoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8v6Ziy5q2i6buY6K6k6I+c5Y2V5by55Ye6CiAgICAgIHRoaXMuY2xvc2VDb250ZXh0TWVudSgpOwogICAgICBsZXQgb2JqID0gZS5zcmNFbGVtZW50ID8gZS5zcmNFbGVtZW50IDogZS50YXJnZXQ7CiAgICAgIGlmIChvYmouaWQpIHsKICAgICAgICBsZXQgY3VycmVudENvbnRleHRUYWJJZCA9IG9iai5pZC5zcGxpdCgiLSIpWzFdOwogICAgICAgIGxldCBjdXJJbmRleCA9IDA7CiAgICAgICAgZm9yICg7IGN1ckluZGV4IDwgdGhpcy52aXNpdGVkUm91dGVzLmxlbmd0aDsgKytjdXJJbmRleCkgewogICAgICAgICAgaWYgKHRoaXMudmlzaXRlZFJvdXRlc1tjdXJJbmRleF0ubmFtZSA9PSBjdXJyZW50Q29udGV4dFRhYklkKSB7CiAgICAgICAgICAgIHRoaXMucmlnaHRUYXBNZW51ID0gdGhpcy52aXNpdGVkUm91dGVzW2N1ckluZGV4XTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMudG9wID0gZS5jbGllbnRZOwogICAgICAgIGxldCBkb2N1bWVudFdpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsKICAgICAgICBpZiAoZG9jdW1lbnRXaWR0aCAtIGUucGFnZVggPCAxMjApIHsKICAgICAgICAgIHRoaXMubGVmdCA9IGUuY2xpZW50WCAtIDEwMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5sZWZ0ID0gZS5jbGllbnRYOwogICAgICAgIH0KICAgICAgICBpZiAoY3VySW5kZXggIT0gMCkgewogICAgICAgICAgdGhpcy5jb250ZXh0TWVudVZpc2libGUgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8v5YWz6Zet5b2T5YmNCiAgICBjbG9zZVRoaXNUYWJzKCkgewogICAgICB0aGlzLnJlbW92ZVRhYih0aGlzLnJpZ2h0VGFwTWVudS5uYW1lKTsKICAgIH0sCiAgICAvL+WFs+mXreWFtuWugwogICAgY2xvc2VPdGhlclRhYnMoKSB7CiAgICAgIHRoaXMuZ29Sb3V0ZXJQYXRoKHRoaXMucmlnaHRUYXBNZW51Lm5hbWUpOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgibWVudS9kZWxPdGhlclZpZXciLCB0aGlzLnJpZ2h0VGFwTWVudSk7CiAgICB9LAogICAgLy/lhbPpl63miYDmnIkKICAgIGNsb3NlQWxsVGFicygpIHsKICAgICAgdGhpcy5nb1JvdXRlclBhdGgoImluZGV4Iik7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJtZW51L2RlbEFsbFZpZXciKTsKICAgIH0sCiAgICAvLyDlhbPpl63lj7PplK7oj5zljZUKICAgIGNsb3NlQ29udGV4dE1lbnUoKSB7CiAgICAgIHRoaXMucmlnaHRUYXBNZW51ID0ge307CiAgICAgIHRoaXMuY29udGV4dE1lbnVWaXNpYmxlID0gZmFsc2U7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["TabsView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TabsView.vue","sourceRoot":"src/layout/components","sourcesContent":["<template>\n  <div class=\"tabs-view\">\n    <span class=\"bars\" @click=\"handleLefeMenu\">\n      <i :class=\"isCollapse ? 'el-icon-s-unfold' : 'el-icon-s-fold'\"></i>\n    </span>\n    <el-tabs\n      type=\"card\"\n      v-model=\"activeMenu\"\n      @tab-click=\"handleClick\"\n      @tab-remove=\"removeTab\"\n      @contextmenu.prevent.native=\"openContextMenu\"\n    >\n      <el-tab-pane\n        v-for=\"item in visitedRoutes\"\n        :key=\"item.name\"\n        :label=\"item.meta.title\"\n        :name=\"item.name\"\n        :closable=\"item.name == 'index' ? false : true\"\n      >\n      </el-tab-pane>\n    </el-tabs>\n    <div v-show=\"contextMenuVisible\">\n      <ul :style=\"{ left: left + 'px', top: top + 'px' }\" class=\"contextmenu\">\n        <li>\n          <el-button type=\"text\" @click=\"closeThisTabs()\">关闭当前</el-button>\n        </li>\n        <li>\n          <el-button type=\"text\" @click=\"closeOtherTabs()\">关闭其他</el-button>\n        </li>\n        <li>\n          <el-button type=\"text\" @click=\"closeAllTabs()\">关闭所有</el-button>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"TabsView\",\n  computed: {\n    ...mapGetters([\"isCollapse\", \"visitedRoutes\", \"tabActive\"]),\n    activeMenu: {\n      get: function () {\n        return this.$store.getters.tabActive;\n      },\n      set: function () {},\n    },\n  },\n  data() {\n    //用于定义属性\n    return {\n      rightTapMenu: {},\n      contextMenuVisible: false,\n      left: \"\",\n      top: \"\",\n    };\n  },\n  mounted: function () {\n    window.addEventListener(\"click\", this.closeContextMenu);\n  },\n  methods: {\n    //用于定义的函数\n    handleLefeMenu() {\n      this.$store.dispatch(\"menu/setLeftCollapse\", !this.isCollapse);\n    },\n    handleClick(tab) {\n      this.goRouterPath(tab.name);\n    },\n    goRouterPath(routeName) {\n      let route = this.visitedRoutes.filter(\n        (item) => item.name == routeName\n      )[0];\n      if (this.$route.path != route.path) {\n        this.$router.push({\n          name: route.name,\n        });\n      }\n    },\n    removeTab(targetName) {\n      let tabs = this.visitedRoutes;\n      let activeName = this.tabActive;\n      if (activeName === targetName) {\n        tabs.forEach((tab, index) => {\n          if (tab.name === targetName) {\n            let nextTab = tabs[index + 1] || tabs[index - 1];\n            if (nextTab) {\n              activeName = nextTab.name;\n            }\n          }\n        });\n      }\n      let delRoute = tabs.filter((tab) => tab.name == targetName)[0];\n      this.$store.dispatch(\"menu/delView\", delRoute).then(() => {\n        this.goRouterPath(activeName);\n      });\n    },\n\n    openContextMenu(e) {\n      e.preventDefault(); //防止默认菜单弹出\n      this.closeContextMenu();\n      let obj = e.srcElement ? e.srcElement : e.target;\n      if (obj.id) {\n        let currentContextTabId = obj.id.split(\"-\")[1];\n        let curIndex = 0;\n        for (; curIndex < this.visitedRoutes.length; ++curIndex) {\n          if (this.visitedRoutes[curIndex].name == currentContextTabId) {\n            this.rightTapMenu = this.visitedRoutes[curIndex];\n            break;\n          }\n        }\n        this.top = e.clientY;\n        let documentWidth = document.body.clientWidth;\n        if (documentWidth - e.pageX < 120) {\n          this.left = e.clientX - 100;\n        } else {\n          this.left = e.clientX;\n        }\n        if (curIndex != 0) {\n          this.contextMenuVisible = true;\n        }\n      }\n    },\n    //关闭当前\n    closeThisTabs() {\n      this.removeTab(this.rightTapMenu.name);\n    },\n    //关闭其它\n    closeOtherTabs() {\n      this.goRouterPath(this.rightTapMenu.name);\n      this.$store.dispatch(\"menu/delOtherView\", this.rightTapMenu);\n    },\n    //关闭所有\n    closeAllTabs() {\n      this.goRouterPath(\"index\");\n      this.$store.dispatch(\"menu/delAllView\");\n    },\n    // 关闭右键菜单\n    closeContextMenu() {\n      this.rightTapMenu = {};\n      this.contextMenuVisible = false;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@mixin border-type() {\n  border: none;\n  border-radius: 0;\n}\n\n.tabs-view {\n  .bars {\n    width: 40px;\n    height: 40px;\n    display: inline-block;\n    cursor: pointer;\n    position: relative;\n    box-shadow: 0 0px 6px rgba(0, 0, 0, 0.12);\n\n    i {\n      font-size: 26px;\n      color: #606266;\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n  }\n\n  .bars:hover i {\n    color: #409eff;\n  }\n\n  /deep/ .el-tabs {\n    width: calc(100% - 40px);\n    display: inline-block;\n    position: absolute;\n    top: 0;\n    left: 40px;\n\n    .el-tabs__header {\n      margin: 0;\n      border-bottom: none;\n    }\n\n    .el-tabs__item:focus.is-active.is-focus:not(:active) {\n      @include border-type();\n    }\n  }\n\n  /deep/ .el-tabs__item .el-icon-close:hover {\n    background-color: #f56c6c;\n  }\n\n  /deep/ .el-tabs--card > .el-tabs__header {\n    @include border-type();\n\n    .el-tabs__nav,\n    .el-tabs__item {\n      @include border-type();\n    }\n\n    .el-tabs__item.is-active {\n      background-color: #409eff !important;\n      color: #fff;\n    }\n\n    .el-tabs__item.is-closable:hover,\n    .el-tabs__item:hover {\n      background-color: #ecf5ff;\n    }\n\n    .el-tabs__item.is-active.is-closable .el-icon-close,\n    .el-tabs__item.is-closable:hover .el-icon-close {\n      width: 16px;\n    }\n\n    .el-tabs__item .el-icon-close {\n      font-size: 14px;\n      height: 16px;\n      line-height: 16px;\n    }\n  }\n\n  .contextmenu {\n    width: 100px;\n    margin: 0;\n    border: 1px solid #ccc;\n    background-color: #fff;\n    z-index: 3000;\n    position: fixed;\n    list-style-type: none;\n    padding: 5px 0;\n    border-radius: 4px;\n    color: #333;\n    box-shadow: 2px 2px 3px 0 rgba(0, 0, 0, 0.2);\n\n    li {\n      margin: 0;\n      padding: 0px 22px;\n\n      button {\n        color: #606266;\n      }\n    }\n\n    li:hover {\n      background-color: #ecf5ff;\n      cursor: pointer;\n\n      button {\n        color: #66b1ff;\n      }\n    }\n  }\n}\n</style>\n"]}]}