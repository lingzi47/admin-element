{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\预见未来后台管理系统\\后台\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\预见未来后台管理系统\\后台\\src\\views\\login\\components\\identify.vue?vue&type=style&index=0&id=45140615&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\预见未来后台管理系统\\后台\\src\\views\\login\\components\\identify.vue","mtime":1656764943179},{"path":"C:\\Users\\Administrator\\Desktop\\预见未来后台管理系统\\后台\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\预见未来后台管理系统\\后台\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\预见未来后台管理系统\\后台\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\预见未来后台管理系统\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\预见未来后台管理系统\\后台\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiNjb250LWNhbnZhcyB7CiAgZGlzcGxheTogYmxvY2s7CiAgY3Vyc29yOiBwb2ludGVyOwp9Cg=="},{"version":3,"sources":["identify.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsKA;AACA;AACA;AACA","file":"identify.vue","sourceRoot":"src/views/login/components","sourcesContent":["<template>\n  <div class=\"canvas-box\" @click=\"changeCode\">\n    <canvas\n      id=\"cont-canvas\"\n      :width=\"contentWidth\"\n      :height=\"contentHeight\"\n    ></canvas>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"IdentifyCode\",\n  data() {\n    return {\n      identifyCode: \"\",\n    };\n  },\n  props: {\n    identifyCodes: {\n      //验证码从该字段中抽取生成\n      type: String,\n      default: \"0123456789abcdefghijkmnpqrstuvwxyzABCDEFGHIJKMNPQRSTUVWXYZ\",\n    },\n    fontSizeMin: {\n      // 字体最小值\n      type: Number,\n      default: 25,\n    },\n    fontSizeMax: {\n      // 字体最大值\n      type: Number,\n      default: 35,\n    },\n    backgroundColorMin: {\n      // 验证码图片背景色最小值\n      type: Number,\n      default: 200,\n    },\n    backgroundColorMax: {\n      // 验证码图片背景色最大值\n      type: Number,\n      default: 220,\n    },\n    dotColorMin: {\n      // 背景干扰点最小值\n      type: Number,\n      default: 60,\n    },\n    dotColorMax: {\n      // 背景干扰点最大值\n      type: Number,\n      default: 120,\n    },\n    contentWidth: {\n      //容器宽度\n      type: Number,\n      default: 115,\n    },\n    contentHeight: {\n      //容器高度\n      type: Number,\n      default: 43,\n    },\n  },\n  watch: {\n    identifyCode() {\n      this.drawPic();\n    },\n  },\n  mounted() {\n    this.drawPic();\n    this.makeCode(this.identifyCodes, 4);\n  },\n  methods: {\n    // 生成一个随机数\n    randomNum(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    },\n    // 生成一个随机的颜色\n    randomColor(min, max) {\n      let r = this.randomNum(min, max);\n      let g = this.randomNum(min, max);\n      let b = this.randomNum(min, max);\n      return \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\n    },\n    drawPic() {\n      let canvas = document.getElementById(\"cont-canvas\");\n      let ctx = canvas.getContext(\"2d\");\n      ctx.textBaseline = \"bottom\";\n      // 绘制背景\n      ctx.fillStyle = this.randomColor(\n        this.backgroundColorMin,\n        this.backgroundColorMax\n      );\n      ctx.fillRect(0, 0, this.contentWidth, this.contentHeight);\n      // 绘制文字\n      for (let i = 0; i < this.identifyCode.length; i++) {\n        this.drawText(ctx, this.identifyCode[i], i);\n      }\n      this.drawLine(ctx);\n      this.drawDot(ctx);\n    },\n    drawText(ctx, txt, i) {\n      ctx.fillStyle = this.randomColor(50, 160); //随机生成字体颜色\n      ctx.font =\n        this.randomNum(this.fontSizeMin, this.fontSizeMax) + \"px SimHei\"; //随机生成字体大小\n      let x = (i + 1) * (this.contentWidth / (this.identifyCode.length + 1));\n      let y = this.randomNum(this.fontSizeMax, this.contentHeight - 5);\n      var deg = this.randomNum(-30, 30);\n      // 修改坐标原点和旋转角度\n      ctx.translate(x, y);\n      ctx.rotate((deg * Math.PI) / 180);\n      ctx.fillText(txt, 0, 0);\n      // 恢复坐标原点和旋转角度\n      ctx.rotate((-deg * Math.PI) / 180);\n      ctx.translate(-x, -y);\n    },\n    drawLine(ctx) {\n      // 绘制干扰线\n      for (let i = 0; i < 4; i++) {\n        ctx.strokeStyle = this.randomColor(100, 200);\n        ctx.beginPath();\n        ctx.moveTo(\n          this.randomNum(0, this.contentWidth),\n          this.randomNum(0, this.contentHeight)\n        );\n        ctx.lineTo(\n          this.randomNum(0, this.contentWidth),\n          this.randomNum(0, this.contentHeight)\n        );\n        ctx.stroke();\n      }\n    },\n    drawDot(ctx) {\n      // 绘制干扰点\n      for (let i = 0; i < 30; i++) {\n        ctx.fillStyle = this.randomColor(0, 255);\n        ctx.beginPath();\n        ctx.arc(\n          this.randomNum(0, this.contentWidth),\n          this.randomNum(0, this.contentHeight),\n          1,\n          0,\n          2 * Math.PI\n        );\n        ctx.fill();\n      }\n    },\n    /*切换验证码start*/\n    changeCode() {\n      this.identifyCode = \"\";\n      this.makeCode(this.identifyCodes, 4);\n    },\n    makeCode(e, n) {\n      for (let i = 0; i < n; i++) {\n        this.identifyCode += e[this.randomNum(0, e.length)];\n      }\n      //console.log(\"code = \", this.identifyCode);\n      this.$emit(\"update:changeCode\", this.identifyCode);\n    },\n    /*切换验证码end*/\n  },\n};\n</script>\n<style scoped>\n#cont-canvas {\n  display: block;\n  cursor: pointer;\n}\n</style>\n"]}]}