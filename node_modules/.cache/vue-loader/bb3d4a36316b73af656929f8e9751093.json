{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\后台\\src\\views\\basis\\countDown\\index.vue?vue&type=style&index=0&id=037fc6ce&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\后台\\src\\views\\basis\\countDown\\index.vue","mtime":1646805521000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY291bnQtZG93biB7CiAgbWFyZ2luLXRvcDogMzBweDsKICBtYXJnaW4tbGVmdDogMzBweDsKICAuZHQtY29uIHsKICAgIHdpZHRoOiA5MDBweDsKCiAgICAuZHQtbGlzdCB7CiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgbWFyZ2luOiAyMHB4IDIwcHggMCAwOwogICAgICBib3JkZXI6IDFweCBzb2xpZCAjZWJlZWY1OwogICAgICBwYWRkaW5nOiAxMHB4OwogICAgICB3aWR0aDogNDAwcHg7CiAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgICAgYm94LXNoYWRvdzogMCAycHggMjBweCAtNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTsKCiAgICAgIC5kdC1kYXRldGltZSB7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgICAgICAuZHQtZGF0ZXRpbWUtb3ZlciB7CiAgICAgICAgICBtYXJnaW4tbGVmdDogMjBweDsKICAgICAgICB9CiAgICAgIH0KICAgICAgLmR0LXByb2dyZXNzIHsKICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4OwogICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKCiAgICAgICAgLmVsLXByb2dyZXNzIHsKICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGVZKDE4MGRlZyk7CiAgICAgICAgfQogICAgICAgIC5kdC1jZCB7CiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICB0b3A6IDUwJTsKICAgICAgICAgIGxlZnQ6IDUwJTsKICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogICAgICAgICAgY29sb3I6ICM2MDYyNjY7CiAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAuZHQtb3ZlciB7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCA3MywgNzMsIDAuMSk7CiAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDIwcHggLTRweCByZ2JhKDI1NSwgNzMsIDczLCAwLjEpOwogICAgfQogICAgLmR0LW92ZXIgLmR0LWRhdGV0aW1lLAogICAgLmR0LW92ZXIgLmR0LXByb2dyZXNzIC5kdC1jZCwKICAgIC5kYXlzLW92ZXIgLmR0LWRheSAuZHQtY2QsCiAgICAuaG91cnMtb3ZlciAuZHQtZGF5IC5kdC1jZCwKICAgIC5ob3Vycy1vdmVyIC5kdC1ob3VycyAuZHQtY2QsCiAgICAubWlucy1vdmVyIC5kdC1kYXkgLmR0LWNkLAogICAgLm1pbnMtb3ZlciAuZHQtaG91cnMgLmR0LWNkLAogICAgLm1pbnMtb3ZlciAuZHQtbWlucyAuZHQtY2QgewogICAgICBjb2xvcjogI2ZmNDk0OTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2JA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/basis/countDown","sourcesContent":["<template>\n  <div class=\"count-down\">\n    <div class=\"add-datetime\">\n      <el-date-picker v-model=\"addDate\" type=\"datetime\" :picker-options=\"pickerOptions\" placeholder=\"选择时间倒计时\"></el-date-picker>\n      <el-button type=\"primary\" @click=\"addDatetime\" style=\"margin-left: 10px;\">添加</el-button>\n      <span style=\"margin-left: 20px;\">当前时间：{{nowDate}}</span>\n    </div>\n    <div class=\"dt-con\">\n      <div class=\"dt-list\" v-for=\"(d, i) in dateTime\" :key=\"i\" :class=\"[setTimerClass(d)]\">\n        <p class=\"dt-datetime\">结束时间：{{d.endDateTime}} <span v-if=\"d.isOver\" class=\"dt-datetime-over\">已结束</span></p>\n        <div class=\"dt-progress dt-day\">\n          <el-progress type=\"circle\" :percentage=\"Number((d.countDown.days/30*100).toFixed(2))\" :width=\"80\" :show-text=\"false\"></el-progress>\n          <div class=\"dt-cd\">{{d.countDown.days}}天</div>\n        </div>\n        <div class=\"dt-progress dt-hours\">\n          <el-progress type=\"circle\" :percentage=\"Number((d.countDown.hours/24*100).toFixed(2))\" :width=\"80\" :show-text=\"false\"></el-progress>\n          <div class=\"dt-cd\">{{d.countDown.hours}}时</div>\n        </div>\n        <div class=\"dt-progress dt-mins\">\n          <el-progress type=\"circle\" :percentage=\"Number((d.countDown.mins/60*100).toFixed(2))\" :width=\"80\" :show-text=\"false\"></el-progress>\n          <div class=\"dt-cd\">{{d.countDown.mins}}分</div>\n        </div>\n        <div class=\"dt-progress dt-seconds\">\n          <el-progress type=\"circle\" :percentage=\"Number((d.countDown.seconds/60*100).toFixed(2))\" :width=\"80\" :show-text=\"false\"></el-progress>\n          <div class=\"dt-cd\">{{d.countDown.seconds}}秒</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"countDown\",\n  components: {\n\n  },\n  data() {\n    return {\n      addDate: \"\",\n      nowDate: \"\",\n      pickerOptions: {\n        disabledDate(date) {\n          return date.getTime() < Date.now() - 24 * 60 * 60 * 1000 || date.getTime() > Date.now() + 30 * 24 * 60 * 60 * 1000\n        }\n      },\n      dateTime: [{\n        endDateTime: \"2023-01-22 00:00:00\",\n        countDown: { days: \"0\", hours: \"00\", mins: \"00\", seconds: \"00\", },\n        timer: null,\n        isOver: false,\n        curTime: 0,\n      }],\n    }\n  },\n  created() { },\n  mounted() {\n    this.countDown();\n    setInterval(() => {\n      let nd = new Date();\n      let y = nd.getFullYear();\n      let m = `00${nd.getMonth() + 1}`.slice(-2);\n      let d = `00${nd.getDate()}`.slice(-2);\n      let h = `00${nd.getHours()}`.slice(-2);\n      let ms = `00${nd.getMinutes()}`.slice(-2);\n      let s = `00${nd.getSeconds()}`.slice(-2);\n      this.nowDate = y + \"-\" + m + \"-\" + d + \" \" + h + \":\" + ms + \":\" + s\n    }, 1000);\n  },\n  computed: {\n    setTimerClass() {\n      return (dt) => {\n        let dtClass = '';\n        if (!dt.countDown.days && !dt.countDown.hours && !dt.countDown.mins && !dt.countDown.seconds) dtClass = 'dt-over';\n        else if (!dt.countDown.days && !dt.countDown.hours && !dt.countDown.mins && dt.countDown.seconds) dtClass = 'mins-over';\n        else if (!dt.countDown.days && !dt.countDown.hours && (dt.countDown.mins || dt.countDown.seconds)) dtClass = 'hours-over';\n        else if (!dt.countDown.days && (dt.countDown.hours || dt.countDown.mins || dt.countDown.seconds)) dtClass = 'days-over';\n        return dtClass;\n      }\n    }\n  },\n  methods: {\n    addDatetime() {\n      if (!this.addDate) return\n      let selDt = new Date(this.addDate).format(\"yyyy-MM-dd HH:mm:ss\")\n      if ((new Date(selDt).getTime()) - (Date.now()) < 30000) {\n        this.$message.warning(\"倒计时时间不能小于 30 秒\");\n        return;\n      }\n      this.dateTime.push({\n        endDateTime: selDt,\n        countDown: {\n          days: \"0\",\n          hours: \"00\",\n          mins: \"00\",\n          seconds: \"00\",\n        },\n        timer: null,\n        isOver: false,\n      });\n      this.countDown();\n      this.addDate = \"\";\n    },\n    countDown() {\n      let curTime = Date.now();\n      this.dateTime.map(item => {\n        item.curTime = curTime;\n        let dtTime = new Date(item.endDateTime).getTime();\n        if (dtTime - curTime < 0) item.isOver = true;\n        const time = Math.round((dtTime - curTime) / 1000)\n        this.getTime(item, time);\n      })\n    },\n    getTime(dt, time) {\n      dt.timer && clearInterval(dt.timer);\n      if (time < 0) {\n        dt.isOver = true;\n        return\n      }\n      const { dd, hh, mm, ss } = this.durationFormatter(time);\n      dt.countDown.days = dd || 0;\n      // dt.countDown.hours = `00${hh || ''}`.slice(-2);\n      // dt.countDown.mins = `00${mm || ''}`.slice(-2);\n      // dt.countDown.seconds = `00${ss || ''}`.slice(-2);\n      dt.countDown.hours = hh || 0;\n      dt.countDown.mins = mm || 0;\n      dt.countDown.seconds = ss || 0;\n      dt.timer = setTimeout(_ => {\n        let curTime = Date.now();\n        let dtTime = new Date(dt.endDateTime).getTime();\n        const differenceTime = Math.round((dtTime - curTime) / 1000)\n        this.getTime(dt, differenceTime);\n      }, 1000)\n\n    },\n    durationFormatter(time) {\n      if (!time) return { ss: 0 };\n      let t = time;\n      const ss = t % 60;\n      t = (t - ss) / 60;\n      if (t < 1) return { ss };\n      const mm = t % 60;\n      t = (t - mm) / 60;\n      if (t < 1) return { mm, ss };\n      const hh = t % 24;\n      t = (t - hh) / 24;\n      if (t < 1) return { hh, mm, ss };\n      const dd = t;\n      return { dd, hh, mm, ss };\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.count-down {\n  margin-top: 30px;\n  margin-left: 30px;\n  .dt-con {\n    width: 900px;\n\n    .dt-list {\n      display: inline-block;\n      margin: 20px 20px 0 0;\n      border: 1px solid #ebeef5;\n      padding: 10px;\n      width: 400px;\n      border-radius: 8px;\n      box-shadow: 0 2px 20px -4px rgba(0, 0, 0, 0.1);\n\n      .dt-datetime {\n        margin-bottom: 10px;\n        .dt-datetime-over {\n          margin-left: 20px;\n        }\n      }\n      .dt-progress {\n        position: relative;\n        margin-right: 10px;\n        display: inline-block;\n\n        .el-progress {\n          display: block;\n          transform: rotateY(180deg);\n        }\n        .dt-cd {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          color: #606266;\n          font-size: 14px;\n        }\n      }\n    }\n    .dt-over {\n      border: 1px solid rgba(255, 73, 73, 0.1);\n      box-shadow: 0 2px 20px -4px rgba(255, 73, 73, 0.1);\n    }\n    .dt-over .dt-datetime,\n    .dt-over .dt-progress .dt-cd,\n    .days-over .dt-day .dt-cd,\n    .hours-over .dt-day .dt-cd,\n    .hours-over .dt-hours .dt-cd,\n    .mins-over .dt-day .dt-cd,\n    .mins-over .dt-hours .dt-cd,\n    .mins-over .dt-mins .dt-cd {\n      color: #ff4949;\n    }\n  }\n}\n</style>\n"]}]}