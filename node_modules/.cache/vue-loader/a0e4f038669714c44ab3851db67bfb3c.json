{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\后台\\src\\views\\authority\\menu\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\后台\\src\\views\\authority\\menu\\index.vue","mtime":1652153987492},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNoZWNrUGVybWlzc2lvbiB9IGZyb20gIkAvdXRpbHMvcGVybWlzc2lvbnMiOwppbXBvcnQgeyBnZXRNZW51LCBnZXRMZXZlbE1lbnUgfSBmcm9tICJAL2FwaS9vcGVyYXRpb24iOwppbXBvcnQgcGFnZVRhYmxlIGZyb20gIkAvY29tcG9uZW50cy9wYWdlVGFibGUudnVlIjsKaW1wb3J0IGVkaXREaWFsb2cgZnJvbSAiLi9jb21wb25lbnRzL2VkaXREaWFsb2cudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJtZW51UGFnZSIsCiAgY29tcG9uZW50czogewogICAgcGFnZVRhYmxlLAogICAgZWRpdERpYWxvZywKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZW51TGlzdDogW10sCiAgICAgIHRhYmxlU2VsZWN0TGlzdDogW10sCiAgICAgIGZvcm06IHsKICAgICAgICBtZW51SWQxOiAiIiwKICAgICAgICBtZW51SWQyOiAiIiwKICAgICAgfSwKICAgICAgbWVudUxldmVsMTogW10sIC8v5LiA57qn6I+c5Y2VCiAgICAgIG1lbnVMZXZlbDI6IFtdLCAvL+S6jOe6p+iPnOWNlQogICAgICBzaG93TWVudUxldmVsMjogW10sCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TWVudSgpOwogICAgdGhpcy5nZXRMZXZlbE1lbnUoKTsKICB9LAogIG1vdW50ZWQoKSB7fSwKICBtZXRob2RzOiB7CiAgICBjaGVja1Blcm1pc3Npb24sCiAgICAvL+ebkeWQrOihqOagvOWkmumAiQogICAgZ2V0U2VsZWN0aW9uKHNlbGVjdCkgewogICAgICB0aGlzLnRhYmxlU2VsZWN0TGlzdCA9IHNlbGVjdDsKICAgIH0sCiAgICBhc3luYyBnZXRNZW51KCkgewogICAgICBsZXQgcmVzID0gYXdhaXQgZ2V0TWVudSh0aGlzLmZvcm0pOwogICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICB0aGlzLm1lbnVMaXN0ID0gcmVzLmRhdGE7CiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5tZW51TGlzdCk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBnZXRMZXZlbE1lbnUoKSB7CiAgICAgIGxldCByZXMgPSBhd2FpdCBnZXRMZXZlbE1lbnUoKTsKICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgdGhpcy5tZW51TGV2ZWwxID0gcmVzLmRhdGEubWVudUxldmVsMTsKICAgICAgICB0aGlzLm1lbnVMZXZlbDIgPSByZXMuZGF0YS5tZW51TGV2ZWwyOwogICAgICAgIHRoaXMuc2hvd01lbnVMZXZlbDIgPSBbXTsKICAgICAgfQogICAgfSwKICAgIG1lbnVDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuc2hvd01lbnVMZXZlbDIgPSB0aGlzLm1lbnVMZXZlbDIuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnBpZCA9PSB2YWwpOwogICAgfSwKICAgIGVkaXREYXRhKCkgewogICAgICBpZiAodGhpcy50YWJsZVNlbGVjdExpc3QubGVuZ3RoID09IDEpIHsKICAgICAgICB0aGlzLiRyZWZzLmVkaXREYXRhLnNob3coCiAgICAgICAgICBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMudGFibGVTZWxlY3RMaXN0WzBdKSkKICAgICAgICApOwogICAgICB9IGVsc2UgaWYgKHRoaXMudGFibGVTZWxlY3RMaXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCLor7fpgInmi6nkuIDmnaHmlbDmja7nvJbovpEiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIuaaguS4jeaUr+aMgeaJuemHj+e8lui+kSIpOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/authority/menu","sourcesContent":["<template>\n  <div class=\"menu\">\n    <div class=\"block-quote\">\n      <el-form :inline=\"true\" ref=\"form\">\n        <el-form-item label=\"一级菜单\" prop=\"menuId1\">\n          <el-select\n            v-model=\"form.menuId1\"\n            clearable\n            filterable\n            placeholder=\"请选择一级菜单\"\n            @change=\"menuChange\"\n          >\n            <el-option\n              v-for=\"item in menuLevel1\"\n              :value=\"item.id\"\n              :label=\"item.title\"\n              :key=\"item.id\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"二级菜单\" prop=\"menuId2\">\n          <el-select\n            v-model=\"form.menuId2\"\n            clearable\n            filterable\n            placeholder=\"请选择二级菜单\"\n          >\n            <el-option\n              v-for=\"item in showMenuLevel2\"\n              :value=\"item.id\"\n              :label=\"item.title\"\n              :key=\"item.id\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item style=\"float: right\">\n          <el-button\n            v-if=\"checkPermission('menusearch')\"\n            type=\"primary\"\n            icon=\"el-icon-search\"\n            @click=\"getMenu\"\n            >查询</el-button\n          >\n          <el-button\n            v-if=\"checkPermission('menuedit')\"\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            @click=\"editData()\"\n            >编辑</el-button\n          >\n        </el-form-item>\n      </el-form>\n    </div>\n    <page-table\n      ref=\"dataTable\"\n      :data=\"menuList\"\n      :paging=\"false\"\n      row-key=\"id\"\n      @selection-change=\"getSelection\"\n    >\n      <el-table-column\n        type=\"selection\"\n        fixed\n        width=\"40\"\n        :resizable=\"false\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"id\"\n        label=\"编号\"\n        width=\"200\"\n        :resizable=\"false\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"name\"\n        label=\"菜单\"\n        width=\"200\"\n        :resizable=\"false\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"title\"\n        label=\"菜单名称\"\n        width=\"200\"\n        :resizable=\"false\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"path\"\n        label=\"菜单路径\"\n        :resizable=\"false\"\n      ></el-table-column>\n    </page-table>\n\n    <!-- 编辑弹窗 -->\n    <edit-dialog ref=\"editData\"></edit-dialog>\n  </div>\n</template>\n\n<script>\nimport { checkPermission } from \"@/utils/permissions\";\nimport { getMenu, getLevelMenu } from \"@/api/operation\";\nimport pageTable from \"@/components/pageTable.vue\";\nimport editDialog from \"./components/editDialog.vue\";\nexport default {\n  name: \"menuPage\",\n  components: {\n    pageTable,\n    editDialog,\n  },\n  data() {\n    return {\n      menuList: [],\n      tableSelectList: [],\n      form: {\n        menuId1: \"\",\n        menuId2: \"\",\n      },\n      menuLevel1: [], //一级菜单\n      menuLevel2: [], //二级菜单\n      showMenuLevel2: [],\n    };\n  },\n  created() {\n    this.getMenu();\n    this.getLevelMenu();\n  },\n  mounted() {},\n  methods: {\n    checkPermission,\n    //监听表格多选\n    getSelection(select) {\n      this.tableSelectList = select;\n    },\n    async getMenu() {\n      let res = await getMenu(this.form);\n      if (res.status == 200) {\n        this.menuList = res.data;\n        // console.log(this.menuList);\n      }\n    },\n    async getLevelMenu() {\n      let res = await getLevelMenu();\n      if (res.status == 200) {\n        this.menuLevel1 = res.data.menuLevel1;\n        this.menuLevel2 = res.data.menuLevel2;\n        this.showMenuLevel2 = [];\n      }\n    },\n    menuChange(val) {\n      this.showMenuLevel2 = this.menuLevel2.filter((item) => item.pid == val);\n    },\n    editData() {\n      if (this.tableSelectList.length == 1) {\n        this.$refs.editData.show(\n          JSON.parse(JSON.stringify(this.tableSelectList[0]))\n        );\n      } else if (this.tableSelectList.length == 0) {\n        this.$message.warning(\"请选择一条数据编辑\");\n      } else {\n        this.$message.warning(\"暂不支持批量编辑\");\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n</style>\n"]}]}