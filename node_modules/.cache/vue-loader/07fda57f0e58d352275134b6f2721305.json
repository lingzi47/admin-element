{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\预见未来后台管理系统\\后台\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\预见未来后台管理系统\\后台\\src\\views\\points\\pointslist\\components\\upSet.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\预见未来后台管理系统\\后台\\src\\views\\points\\pointslist\\components\\upSet.vue","mtime":1663825984863},{"path":"C:\\Users\\Administrator\\Desktop\\预见未来后台管理系统\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\预见未来后台管理系统\\后台\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\预见未来后台管理系统\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\预见未来后台管理系统\\后台\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnb29kc2FkZCwgb2ZmaWNpbmFsaXN0LCBiaW5kLCBiaW5kZWRpdCB9IGZyb20gIkAvcmVxdWVzdC9hcGkiOw0KaW1wb3J0IHsgYXJlYUxpc3REYXRhIH0gZnJvbSAiQC91dGlscy9hcmVhIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkFkZERpYWxvZyIsDQogIGNvbXBvbmVudHM6IHt9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBpZDogIiIsDQogICAgICBnb29kc0Zvcm06IHsNCiAgICAgICAgYm94X25hbWU6ICIiLA0KICAgICAgICBib3hfbnVtYmVyOiAiIiwNCiAgICAgICAgb2ZmaWNpbmFfaWQ6ICIiLA0KICAgICAgICBiaW5kX2lkOiAiIiwNCiAgICAgIH0sDQogICAgICBkdWVfdGltZTogIiIsDQogICAgICB0b2tlbjogIiIsDQogICAgICBwcm92aW5jZTE6ICIiLA0KICAgICAgZGlzYWJsZTogZmFsc2UsDQogICAgICBjaXR5MTogIiIsDQogICAgICBhcmVhMTogIiIsDQogICAgICBwcm92aW5jZTogIiIsDQogICAgICBjaXR5OiAiIiwNCiAgICAgIGFyZWE6ICIiLA0KICAgICAgbmFtZTogIiIsDQogICAgICBvZmZpY2luYXByb3ZpbmNlOiAiIiwNCiAgICAgIG9mZmljaW5hY2l0eTogIiIsDQogICAgICBvZmZpY2luYWFyZWE6ICIiLA0KDQogICAgICB0eXBlOiAiIiwNCiAgICAgIGRldGFpbHM6ICIiLA0KICAgICAgY3JlYXRlX3RpbWU6ICIiLA0KICAgICAgcG9zaXRpb246IFt7IGlkOiAiIiwgbmFtZTogIiIsIHVpZDogIiIsIHZhbHVlOiAiIiB9XSwNCiAgICAgIHVzZXI6IHsgaWQ6ICIiLCB1aWQ6ICIiLCBuYW1lOiAiIiwgdmFsdWU6ICIiIH0sDQogICAgICBsaXN0OiBbXSwNCiAgICAgIGxpc3QxOiBbXSwNCiAgICAgIHZhbHVlMTogIiIsDQogICAgICB0eXBlaWQ6ICIiLA0KICAgICAgcG9zaXRpb25fdXNlcjogIiIsDQogICAgICBzdW06ICIiLA0KICAgICAgdHlwZTogIiIsIC8vMeaWsOWinu+8jDLnvJbovpENCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLA0KDQogICAgICB1aWQ6ICIiLA0KDQogICAgICBydWxlczogew0KICAgICAgICBib3hfbmFtZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXorr7lpIfnp5/otYHlj7ciLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgXSwNCiAgICAgICAgYm94X251bWJlcjogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXorr7lpIfnvJblj7ciLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgXSwNCiAgICAgICAgb2ZmaWNpbmFfaWQ6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36YCJ5oup6I2v5oi/IiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgIF0sDQogICAgICB9LA0KICAgIH07DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5zZXREYXRhKGFyZWFMaXN0RGF0YSgpKTsNCiAgICB0aGlzLmFyZWFBcnIgPSBhcmVhTGlzdERhdGEoKTsNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBuYW1lKG5ld1ZhbCkgew0KICAgICAgLy8gY29uc29sZS5sb2cobmV3VmFsKTsNCiAgICAgIHRoaXMuaHVvbGlzdDEoKTsNCiAgICB9LA0KICB9LA0KICBtb3VudGVkKCkge30sDQogIG1ldGhvZHM6IHsNCiAgICBpbnNlcnQoKSB7DQogICAgICB0aGlzLnVzZXIgPSB7IGlkOiAiIiwgbmFtZTogIiIsIHVpZDogIiIsIHZhbHVlOiAiIiB9Ow0KICAgICAgdGhpcy5wb3NpdGlvbi5wdXNoKHRoaXMudXNlcik7DQogICAgfSwNCiAgICByZW1vdmUoaW5kZXgpIHsNCiAgICAgIHRoaXMucG9zaXRpb24uc3BsaWNlKGluZGV4LCAxKTsNCiAgICB9LA0KICAgIGh1b2xpc3QxKCkgew0KICAgICAgbGV0IHBhcmFtcyA9IHsNCiAgICAgICAgLy9iaWdfbmFtZSDmlLk0DQogICAgICAgIHRva2VuOiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpLA0KICAgICAgICBiaWdfbmFtZTogdGhpcy5uYW1lLA0KICAgICAgICBwcm92aW5jZTogdGhpcy5wcm92aW5jZTEsDQogICAgICAgIGNpdHk6IHRoaXMuY2l0eTEsDQogICAgICAgIGFyZWE6IHRoaXMuYXJlYTEsDQogICAgICB9Ow0KICAgICAgb2ZmaWNpbmFsaXN0KHBhcmFtcykudGhlbigocmVzKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLmRhdGEpOw0KICAgICAgICB0aGlzLmxpc3QxID0gcmVzLmRhdGEuZGF0YTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgc2V0RGF0YShkYXRhKSB7DQogICAgICBkYXRhLm1hcCgoaXRlbSkgPT4gew0KICAgICAgICBpdGVtWyJ2YWx1ZSJdID0gaXRlbS5jb2RlOw0KICAgICAgICBpdGVtWyJsYWJlbCJdID0gaXRlbS5uYW1lOw0KICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbikgew0KICAgICAgICAgIHRoaXMuc2V0RGF0YShpdGVtLmNoaWxkcmVuKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBjaGFuKGlkKSB7DQogICAgICBjb25zb2xlLmxvZyhpZCk7DQoNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMubGlzdDEuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLmlkID09IGlkKSk7DQogICAgICBsZXQgaW5kZXggPSB0aGlzLmxpc3QxLmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbS5pZCA9PSBpZCk7DQogICAgICBjb25zb2xlLmxvZyhpbmRleCk7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLmxpc3QxW2luZGV4XSk7DQogICAgICBsZXQgb2JqID0gdGhpcy5saXN0MVtpbmRleF07DQogICAgICB0aGlzLnN1bSA9IFN0cmluZyhvYmoudG90YWxfcHJvZml0KTsNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3VtKTsNCiAgICB9LA0KICAgIGNoYW5nZTEoZGF0YSkgew0KICAgICAgY29uc29sZS5sb2coZGF0YSk7DQogICAgICB0aGlzLmdvb2RzRm9ybS5vZmZpY2luYV9pZCA9ICIiOw0KICAgIH0sDQogICAgY2hhbmdlKGRhdGEpIHsNCiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOw0KICAgICAgdGhpcy5wcm92aW5jZTEgPSBkYXRhWzBdOw0KICAgICAgdGhpcy5jaXR5MSA9IGRhdGFbMV07DQogICAgICB0aGlzLmFyZWExID0gZGF0YVsyXTsNCiAgICAgIHRoaXMubmFtZSA9ICIiOw0KICAgICAgdGhpcy5nb29kc0Zvcm0ub2ZmaWNpbmFfaWQgPSAiIjsNCiAgICAgIHRoaXMuZ2V0KCk7DQogICAgfSwNCiAgICBnZXQoKSB7DQogICAgICBsZXQgcGFyYW1zID0gew0KICAgICAgICB0b2tlbjogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKSwNCiAgICAgICAgcHJvdmluY2U6IHRoaXMucHJvdmluY2UxLA0KICAgICAgICBjaXR5OiB0aGlzLmNpdHkxLA0KICAgICAgICBhcmVhOiB0aGlzLmFyZWExLA0KICAgICAgfTsNCiAgICAgIG9mZmljaW5hbGlzdChwYXJhbXMpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhKTsNCiAgICAgICAgdGhpcy5saXN0ID0gcmVzLmRhdGEuZGF0YTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgc2hvdyh0eXBlLCByb3cpIHsNCiAgICAgIGNvbnNvbGUubG9nKHR5cGUpOw0KICAgICAgdGhpcy50eXBlaWQgPSB0eXBlOw0KICAgICAgY29uc29sZS5sb2cocm93KTsNCiAgICAgIGlmIChyb3cudHlwZSA9PSAyMCkgew0KICAgICAgICB0aGlzLnR5cGUgPSAi5rig6YGT5ZWGIjsNCiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHJvdy5wb3NpdGlvbjsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMudHlwZSA9ICLlhazlj7giOw0KICAgICAgfQ0KICAgICAgdGhpcy5wcm92aW5jZSA9IHJvdy5wcm92aW5jZTsNCiAgICAgIHRoaXMuY2l0eSA9IHJvdy5jaXR5Ow0KICAgICAgdGhpcy5jcmVhdGVfdGltZSA9IHJvdy5jcmVhdGVfdGltZTsNCg0KICAgICAgdGhpcy5hcmVhID0gcm93LmFyZWE7DQogICAgICB0aGlzLmR1ZV90aW1lID0gcm93LmR1ZV90aW1lOw0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIHRoaXMuaWQgPSByb3cuaWQ7DQogICAgICB0aGlzLmRldGFpbHMgPSByb3cuZGV0YWlsczsNCiAgICAgIHRoaXMucG9zaXRpb25fdXNlciA9IHJvdy5wb3NpdGlvbl91c2VyOw0KICAgICAgaWYgKHRoaXMudHlwZWlkID09IDEpIHsNCiAgICAgICAgdGhpcy5kaXNhYmxlID0gZmFsc2U7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmRpc2FibGUgPSB0cnVlOw0KICAgICAgICB0aGlzLmdvb2RzRm9ybS5ib3hfbmFtZSA9IHJvdy5ib3hfbmFtZTsNCiAgICAgICAgdGhpcy5kdWVfdGltZSA9IHJvdy5kdWVfdGltZTsNCiAgICAgICAgdGhpcy5nb29kc0Zvcm0uYmluZF9pZCA9IHJvdy5iaW5kX2lkOw0KICAgICAgICB0aGlzLmdvb2RzRm9ybS5ib3hfbnVtYmVyID0gcm93LmJveF9udW1iZXI7DQogICAgICAgIHRoaXMuaWQgPSByb3cuaWQ7DQogICAgICAgIHRoaXMubmFtZSA9IHJvdy5iaWdfbmFtZTsNCiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHJvdy5wb3NpdGlvbjsNCg0KICAgICAgICB0aGlzLmdvb2RzRm9ybS5vZmZpY2luYV9pZCA9IFN0cmluZyhyb3cub2ZmaWNpbmFfaWQpOw0KDQogICAgICAgIGxldCBhcnIxID0gW107DQogICAgICAgIGFycjEucHVzaChyb3cueWFvcHJvdmluY2UpOw0KICAgICAgICBhcnIxLnB1c2gocm93Lnlhb2NpdHkpOw0KICAgICAgICBhcnIxLnB1c2gocm93Lnlhb2FyZWEpOw0KICAgICAgICB0aGlzLm9mZmljaW5hcHJvdmluY2UgPSByb3cueWFvcHJvdmluY2U7DQogICAgICAgIHRoaXMub2ZmaWNpbmFjaXR5ID0gcm93Lnlhb2NpdHk7DQogICAgICAgIHRoaXMub2ZmaWNpbmFhcmVhID0gcm93Lnlhb2FyZWE7DQogICAgICAgIGNvbnNvbGUubG9nKGFycjEpOw0KICAgICAgICB0aGlzLnZhbHVlMSA9IGFycjE7DQoNCiAgICAgICAgbGV0IHBhcmFtcyA9IHsNCiAgICAgICAgICB0b2tlbjogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKSwNCiAgICAgICAgICBwcm92aW5jZTogdGhpcy5vZmZpY2luYXByb3ZpbmNlLA0KICAgICAgICAgIGNpdHk6IHRoaXMub2ZmaWNpbmFjaXR5LA0KICAgICAgICAgIGFyZWE6IHRoaXMub2ZmaWNpbmFhcmVhLA0KICAgICAgICB9Ow0KICAgICAgICBvZmZpY2luYWxpc3QocGFyYW1zKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhKTsNCiAgICAgICAgICB0aGlzLmxpc3QgPSByZXMuZGF0YS5kYXRhOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGNsb3NlKCkgew0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7DQogICAgICB0aGlzLmdvb2RzRm9ybS5ib3hfbmFtZSA9ICIiOw0KICAgICAgdGhpcy5nb29kc0Zvcm0uYm94X251bWJlciA9ICIiOw0KICAgICAgdGhpcy52YWx1ZTEgPSAiIjsNCiAgICAgIHRoaXMuZ29vZHNGb3JtLm9mZmljaW5hX2lkID0gIiI7DQogICAgICB0aGlzLmxpc3QgPSBbXTsNCiAgICAgIHRoaXMubGlzdDEgPSBbXTsNCiAgICAgIHRoaXMubmFtZSA9ICIiOw0KICAgICAgdGhpcy5wb3NpdGlvbiA9IFt7IGlkOiAiIiwgdWlkOiAiIiwgbmFtZTogIiIsIHZhbHVlOiAiIiB9XTsNCiAgICB9LA0KICAgIGNoZWNrZWQoKSB7DQogICAgICBjb25zb2xlLmxvZygxMSk7DQogICAgfSwNCiAgICBnbygpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7DQogICAgfSwNCiAgICBzdWJtaXRGb3JtKCkgew0KICAgICAgaWYgKHRoaXMudHlwZWlkID09IDEpIHsNCiAgICAgICAgdGhpcy4kcmVmcy5nb29kc0Zvcm0udmFsaWRhdGUoYXN5bmMgKHZhbGlkKSA9PiB7DQogICAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgICBsZXQgc3VtID0gMDsNCiAgICAgICAgICAgIHRoaXMucG9zaXRpb24uZm9yRWFjaCgoaXRlbSkgPT4gew0KICAgICAgICAgICAgICAvL+mBjeWOhnByb2RBbGxQcmljZei/meS4quWtl+aute+8jOW5tue0r+WKoA0KICAgICAgICAgICAgICBzdW0gKz0gTnVtYmVyKGl0ZW0udmFsdWUpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhzdW0pOw0KICAgICAgICAgICAgaWYgKHN1bSA+IHRoaXMuc3VtKSB7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuWIhua2puWNoOavlOi2hei/h+acgOWkpyIpOw0KICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7DQogICAgICAgICAgICBsZXQgZmxhZyA9IHRoYXQucG9zaXRpb24uZXZlcnkoKGl0ZW0pID0+ICEhaXRlbS51aWQpOw0KICAgICAgICAgICAgbGV0IGZsYWcxID0gdGhhdC5wb3NpdGlvbi5ldmVyeSgoaXRlbSkgPT4gISFpdGVtLm5hbWUpOw0KICAgICAgICAgICAgbGV0IGZsYWcyID0gdGhhdC5wb3NpdGlvbi5ldmVyeSgoaXRlbSkgPT4gISFpdGVtLnZhbHVlKTsNCiAgICAgICAgICAgIGlmICghZmxhZykgew0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLnu5HlrpppZOS4jeiDveS4uuepuiIpOw0KICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIWZsYWcxKSB7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIue7keWumui6q+S7veS4jeiDveS4uuepuiIpOw0KICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIWZsYWcyKSB7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuWIhua2puWNoOavlOS4jeiDveS4uuepuiIpOw0KICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyB2YXIgZm9ybWRhdGEgPSB0aGlzLnBvc2l0aW9uOw0KICAgICAgICAgICAgLy8gbGV0IGpzb24gPSBKU09OLnN0cmluZ2lmeShmb3JtZGF0YSk7DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhqc29uKTsNCiAgICAgICAgICAgIGxldCB0b2tlbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInRva2VuIik7DQogICAgICAgICAgICB0aGlzLnRva2VuID0gdG9rZW47DQogICAgICAgICAgICBsZXQgcGFyYW1zID0gew0KICAgICAgICAgICAgICB0b2tlbjogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKSwNCiAgICAgICAgICAgICAgYm94X25hbWU6IHRoaXMuZ29vZHNGb3JtLmJveF9uYW1lLA0KICAgICAgICAgICAgICBib3hfbnVtYmVyOiB0aGlzLmdvb2RzRm9ybS5ib3hfbnVtYmVyLA0KICAgICAgICAgICAgICBwb3NpdGlvbl9pZDogdGhpcy5pZCwNCiAgICAgICAgICAgICAgb2ZmaWNpbmFfaWQ6IHRoaXMuZ29vZHNGb3JtLm9mZmljaW5hX2lkLA0KICAgICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5wb3NpdGlvbiwNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBiaW5kKHBhcmFtcykudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDIwMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5oiQ5YqfIik7DQogICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LmdldFVzZXJMaXN0KCk7DQogICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubXNnKTsNCiAgICAgICAgICAgICAgICB0aGlzLiRwYXJlbnQuZ2V0VXNlckxpc3QoKTsNCiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJHJlZnMuZ29vZHNGb3JtLnZhbGlkYXRlKGFzeW5jICh2YWxpZCkgPT4gew0KICAgICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgICAgbGV0IHN1bSA9IDA7DQogICAgICAgICAgICB0aGlzLnBvc2l0aW9uLmZvckVhY2goKGl0ZW0pID0+IHsNCiAgICAgICAgICAgICAgLy/pgY3ljoZwcm9kQWxsUHJpY2Xov5nkuKrlrZfmrrXvvIzlubbntK/liqANCiAgICAgICAgICAgICAgc3VtICs9IE51bWJlcihpdGVtLnZhbHVlKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgY29uc29sZS5sb2coc3VtKTsNCiAgICAgICAgICAgIGlmIChzdW0gPiB0aGlzLnN1bSkgew0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLliIbmtqbljaDmr5TotoXov4fmnIDlpKciKTsNCiAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzOw0KICAgICAgICAgICAgbGV0IGZsYWcgPSB0aGF0LnBvc2l0aW9uLmV2ZXJ5KChpdGVtKSA9PiAhIWl0ZW0udWlkKTsNCiAgICAgICAgICAgIGxldCBmbGFnMSA9IHRoYXQucG9zaXRpb24uZXZlcnkoKGl0ZW0pID0+ICEhaXRlbS5uYW1lKTsNCiAgICAgICAgICAgIGxldCBmbGFnMiA9IHRoYXQucG9zaXRpb24uZXZlcnkoKGl0ZW0pID0+ICEhaXRlbS52YWx1ZSk7DQogICAgICAgICAgICBpZiAoIWZsYWcpIHsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi57uR5a6aaWTkuI3og73kuLrnqboiKTsNCiAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFmbGFnMSkgew0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLnu5Hlrprouqvku73kuI3og73kuLrnqboiKTsNCiAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFmbGFnMikgew0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLliIbmtqbljaDmr5TkuI3og73kuLrnqboiKTsNCiAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gdmFyIGZvcm1kYXRhID0gdGhpcy5wb3NpdGlvbjsNCiAgICAgICAgICAgIC8vIGxldCBqc29uID0gSlNPTi5zdHJpbmdpZnkoZm9ybWRhdGEpOw0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coanNvbik7DQogICAgICAgICAgICBsZXQgdG9rZW4gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOw0KICAgICAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuOw0KICAgICAgICAgICAgbGV0IHBhcmFtcyA9IHsNCiAgICAgICAgICAgICAgdG9rZW46IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInRva2VuIiksDQogICAgICAgICAgICAgIGJveF9uYW1lOiB0aGlzLmdvb2RzRm9ybS5ib3hfbmFtZSwNCiAgICAgICAgICAgICAgYm94X251bWJlcjogdGhpcy5nb29kc0Zvcm0uYm94X251bWJlciwNCiAgICAgICAgICAgICAgcG9zaXRpb25faWQ6IHRoaXMuaWQsDQogICAgICAgICAgICAgIGlkOiB0aGlzLmdvb2RzRm9ybS5iaW5kX2lkLA0KICAgICAgICAgICAgICBvZmZpY2luYV9pZDogdGhpcy5nb29kc0Zvcm0ub2ZmaWNpbmFfaWQsDQogICAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLnBvc2l0aW9uLA0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIGJpbmRlZGl0KHBhcmFtcykudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDIwMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5oiQ5YqfIik7DQogICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LmdldFVzZXJMaXN0KCk7DQogICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubXNnKTsNCiAgICAgICAgICAgICAgICB0aGlzLiRwYXJlbnQuZ2V0VXNlckxpc3QoKTsNCiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["upSet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"upSet.vue","sourceRoot":"src/views/points/pointslist/components","sourcesContent":["<template>\r\n  <div>\r\n    <el-dialog\r\n      class=\"AddDialog\"\r\n      :title=\"this.typeid == 1 ? '绑定' : '修改绑定'\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"800px\"\r\n      hegiht=\"1000px\"\r\n      :close-on-click-modal=\"false\"\r\n      @close=\"close\"\r\n    >\r\n      <el-form\r\n        :rules=\"rules\"\r\n        label-width=\"auto\"\r\n        :model=\"goodsForm\"\r\n        ref=\"goodsForm\"\r\n      >\r\n        <el-row :gutter=\"24\">\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"点位位置\">\r\n              {{ province }}-{{ city }}-{{ area }}-{{ details }}\r\n            </el-form-item>\r\n          </el-col>\r\n          <!-- <el-col :span=\"10\">\r\n            <el-form-item label=\"点位详细位置\">\r\n              {{ province }}\r\n            </el-form-item>\r\n          </el-col> -->\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"点位截止日期\">\r\n              {{ create_time }}--{{ due_time }}\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"点位来源:\"> {{ type }}</el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"渠道商id:\">{{ position_user }} </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"设备编号:\" prop=\"box_number\">\r\n              <el-input\r\n                v-model=\"goodsForm.box_number\"\r\n                style=\"width: 180px\"\r\n                placeholder=\"请输入设备编号\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"设备租赁号:\" prop=\"box_name\">\r\n              <el-input\r\n                :disabled=\"disable\"\r\n                v-model=\"goodsForm.box_name\"\r\n                style=\"width: 180px\"\r\n                placeholder=\"请输入设备租赁号\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"绑定设备供货药房:\" prop=\"value1\">\r\n              <el-cascader\r\n                style=\"width: 250px\"\r\n                v-model=\"value1\"\r\n                :options=\"areaArr\"\r\n                :props=\"{ value: 'name', label: 'name' }\"\r\n                placeholder=\"请选择省市区\"\r\n                filterable\r\n                @change=\"change\"\r\n              ></el-cascader>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"16\">\r\n            <el-form-item prop=\"officina_id\">\r\n              <el-select\r\n                v-model=\"name\"\r\n                placeholder=\"请选择药房\"\r\n                style=\"width: 150px\"\r\n                clearable\r\n                @change=\"change1\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in list\"\r\n                  :value=\"item.big_name\"\r\n                  :key=\"item.big_name\"\r\n                  :label=\"item.big_name\"\r\n                ></el-option>\r\n              </el-select>\r\n              <el-select\r\n                v-model=\"goodsForm.officina_id\"\r\n                placeholder=\"请选择药房\"\r\n                style=\"width: 150px\"\r\n                clearable\r\n                @change=\"chan\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in list1\"\r\n                  :value=\"item.id\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"绑定分润:\"></el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item\r\n              label=\"渠道商:\"\r\n              style=\"margin-left: -60px\"\r\n            ></el-form-item>\r\n          </el-col>\r\n          <el-col\r\n            v-if=\"type == '渠道商'\"\r\n            style=\"margin-left: -50px; margin-top: -61px\"\r\n            :span=\"24\"\r\n          >\r\n            <el-form-item v-for=\"(v, k) in position\" :key=\"k\" prop=\"tel\">\r\n              <span>账号{{ k + 1 }}</span>\r\n              绑定身份:\r\n              <el-input\r\n                v-model=\"v.name\"\r\n                style=\"width: 80px\"\r\n                placeholder=\"请输入\"\r\n              ></el-input>\r\n              绑定id:\r\n              <el-input\r\n                v-model=\"v.uid\"\r\n                style=\"width: 80px\"\r\n                placeholder=\"请输入\"\r\n              ></el-input>\r\n\r\n              分润占比:\r\n              <el-input\r\n                v-model=\"v.value\"\r\n                style=\"width: 80px\"\r\n                placeholder=\"请输入\"\r\n              ></el-input\r\n              >%\r\n              <el-button\r\n                type=\"primary\"\r\n                style=\"margin-left: 10px\"\r\n                size=\"mini\"\r\n                v-if=\"k == position.length - 1\"\r\n                @click=\"insert\"\r\n                >+</el-button\r\n              >\r\n              <el-button\r\n                type=\"danger\"\r\n                size=\"mini\"\r\n                v-if=\"k !== 0 && typeid == 1\"\r\n                @click=\"remove(k)\"\r\n                >-</el-button\r\n              >\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { goodsadd, officinalist, bind, bindedit } from \"@/request/api\";\r\nimport { areaListData } from \"@/utils/area\";\r\nexport default {\r\n  name: \"AddDialog\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      id: \"\",\r\n      goodsForm: {\r\n        box_name: \"\",\r\n        box_number: \"\",\r\n        officina_id: \"\",\r\n        bind_id: \"\",\r\n      },\r\n      due_time: \"\",\r\n      token: \"\",\r\n      province1: \"\",\r\n      disable: false,\r\n      city1: \"\",\r\n      area1: \"\",\r\n      province: \"\",\r\n      city: \"\",\r\n      area: \"\",\r\n      name: \"\",\r\n      officinaprovince: \"\",\r\n      officinacity: \"\",\r\n      officinaarea: \"\",\r\n\r\n      type: \"\",\r\n      details: \"\",\r\n      create_time: \"\",\r\n      position: [{ id: \"\", name: \"\", uid: \"\", value: \"\" }],\r\n      user: { id: \"\", uid: \"\", name: \"\", value: \"\" },\r\n      list: [],\r\n      list1: [],\r\n      value1: \"\",\r\n      typeid: \"\",\r\n      position_user: \"\",\r\n      sum: \"\",\r\n      type: \"\", //1新增，2编辑\r\n      dialogVisible: false,\r\n\r\n      uid: \"\",\r\n\r\n      rules: {\r\n        box_name: [\r\n          { required: true, message: \"请输入设备租赁号\", trigger: \"blur\" },\r\n        ],\r\n        box_number: [\r\n          { required: true, message: \"请输入设备编号\", trigger: \"blur\" },\r\n        ],\r\n        officina_id: [\r\n          { required: true, message: \"请选择药房\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.setData(areaListData());\r\n    this.areaArr = areaListData();\r\n  },\r\n  watch: {\r\n    name(newVal) {\r\n      // console.log(newVal);\r\n      this.huolist1();\r\n    },\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    insert() {\r\n      this.user = { id: \"\", name: \"\", uid: \"\", value: \"\" };\r\n      this.position.push(this.user);\r\n    },\r\n    remove(index) {\r\n      this.position.splice(index, 1);\r\n    },\r\n    huolist1() {\r\n      let params = {\r\n        //big_name 改4\r\n        token: sessionStorage.getItem(\"token\"),\r\n        big_name: this.name,\r\n        province: this.province1,\r\n        city: this.city1,\r\n        area: this.area1,\r\n      };\r\n      officinalist(params).then((res) => {\r\n        console.log(res.data.data);\r\n        this.list1 = res.data.data;\r\n      });\r\n    },\r\n    setData(data) {\r\n      data.map((item) => {\r\n        item[\"value\"] = item.code;\r\n        item[\"label\"] = item.name;\r\n        if (item.children) {\r\n          this.setData(item.children);\r\n        }\r\n      });\r\n    },\r\n    chan(id) {\r\n      console.log(id);\r\n\r\n      console.log(this.list1.findIndex((item) => item.id == id));\r\n      let index = this.list1.findIndex((item) => item.id == id);\r\n      console.log(index);\r\n      console.log(this.list1[index]);\r\n      let obj = this.list1[index];\r\n      this.sum = String(obj.total_profit);\r\n      console.log(this.sum);\r\n    },\r\n    change1(data) {\r\n      console.log(data);\r\n      this.goodsForm.officina_id = \"\";\r\n    },\r\n    change(data) {\r\n      console.log(data);\r\n      this.province1 = data[0];\r\n      this.city1 = data[1];\r\n      this.area1 = data[2];\r\n      this.name = \"\";\r\n      this.goodsForm.officina_id = \"\";\r\n      this.get();\r\n    },\r\n    get() {\r\n      let params = {\r\n        token: sessionStorage.getItem(\"token\"),\r\n        province: this.province1,\r\n        city: this.city1,\r\n        area: this.area1,\r\n      };\r\n      officinalist(params).then((res) => {\r\n        // console.log(res.data.data);\r\n        this.list = res.data.data;\r\n      });\r\n    },\r\n    show(type, row) {\r\n      console.log(type);\r\n      this.typeid = type;\r\n      console.log(row);\r\n      if (row.type == 20) {\r\n        this.type = \"渠道商\";\r\n        this.position = row.position;\r\n      } else {\r\n        this.type = \"公司\";\r\n      }\r\n      this.province = row.province;\r\n      this.city = row.city;\r\n      this.create_time = row.create_time;\r\n\r\n      this.area = row.area;\r\n      this.due_time = row.due_time;\r\n      this.dialogVisible = true;\r\n      this.id = row.id;\r\n      this.details = row.details;\r\n      this.position_user = row.position_user;\r\n      if (this.typeid == 1) {\r\n        this.disable = false;\r\n      } else {\r\n        this.disable = true;\r\n        this.goodsForm.box_name = row.box_name;\r\n        this.due_time = row.due_time;\r\n        this.goodsForm.bind_id = row.bind_id;\r\n        this.goodsForm.box_number = row.box_number;\r\n        this.id = row.id;\r\n        this.name = row.big_name;\r\n        this.position = row.position;\r\n\r\n        this.goodsForm.officina_id = String(row.officina_id);\r\n\r\n        let arr1 = [];\r\n        arr1.push(row.yaoprovince);\r\n        arr1.push(row.yaocity);\r\n        arr1.push(row.yaoarea);\r\n        this.officinaprovince = row.yaoprovince;\r\n        this.officinacity = row.yaocity;\r\n        this.officinaarea = row.yaoarea;\r\n        console.log(arr1);\r\n        this.value1 = arr1;\r\n\r\n        let params = {\r\n          token: sessionStorage.getItem(\"token\"),\r\n          province: this.officinaprovince,\r\n          city: this.officinacity,\r\n          area: this.officinaarea,\r\n        };\r\n        officinalist(params).then((res) => {\r\n          // console.log(res.data.data);\r\n          this.list = res.data.data;\r\n        });\r\n      }\r\n    },\r\n    close() {\r\n      this.dialogVisible = false;\r\n      this.goodsForm.box_name = \"\";\r\n      this.goodsForm.box_number = \"\";\r\n      this.value1 = \"\";\r\n      this.goodsForm.officina_id = \"\";\r\n      this.list = [];\r\n      this.list1 = [];\r\n      this.name = \"\";\r\n      this.position = [{ id: \"\", uid: \"\", name: \"\", value: \"\" }];\r\n    },\r\n    checked() {\r\n      console.log(11);\r\n    },\r\n    go() {\r\n      this.$router.go(-1);\r\n    },\r\n    submitForm() {\r\n      if (this.typeid == 1) {\r\n        this.$refs.goodsForm.validate(async (valid) => {\r\n          if (valid) {\r\n            let sum = 0;\r\n            this.position.forEach((item) => {\r\n              //遍历prodAllPrice这个字段，并累加\r\n              sum += Number(item.value);\r\n            });\r\n            console.log(sum);\r\n            if (sum > this.sum) {\r\n              this.$message.error(\"分润占比超过最大\");\r\n              return;\r\n            }\r\n            var that = this;\r\n            let flag = that.position.every((item) => !!item.uid);\r\n            let flag1 = that.position.every((item) => !!item.name);\r\n            let flag2 = that.position.every((item) => !!item.value);\r\n            if (!flag) {\r\n              this.$message.error(\"绑定id不能为空\");\r\n              return;\r\n            }\r\n            if (!flag1) {\r\n              this.$message.error(\"绑定身份不能为空\");\r\n              return;\r\n            }\r\n            if (!flag2) {\r\n              this.$message.error(\"分润占比不能为空\");\r\n              return;\r\n            }\r\n            // var formdata = this.position;\r\n            // let json = JSON.stringify(formdata);\r\n            // console.log(json);\r\n            let token = sessionStorage.getItem(\"token\");\r\n            this.token = token;\r\n            let params = {\r\n              token: sessionStorage.getItem(\"token\"),\r\n              box_name: this.goodsForm.box_name,\r\n              box_number: this.goodsForm.box_number,\r\n              position_id: this.id,\r\n              officina_id: this.goodsForm.officina_id,\r\n              position: this.position,\r\n            };\r\n            bind(params).then((res) => {\r\n              if (res.data.code == 200) {\r\n                this.$message.success(\"成功\");\r\n                this.$parent.getUserList();\r\n                this.close();\r\n              } else {\r\n                this.$message.error(res.data.msg);\r\n                this.$parent.getUserList();\r\n                this.close();\r\n              }\r\n            });\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      } else {\r\n        this.$refs.goodsForm.validate(async (valid) => {\r\n          if (valid) {\r\n            let sum = 0;\r\n            this.position.forEach((item) => {\r\n              //遍历prodAllPrice这个字段，并累加\r\n              sum += Number(item.value);\r\n            });\r\n            console.log(sum);\r\n            if (sum > this.sum) {\r\n              this.$message.error(\"分润占比超过最大\");\r\n              return;\r\n            }\r\n            var that = this;\r\n            let flag = that.position.every((item) => !!item.uid);\r\n            let flag1 = that.position.every((item) => !!item.name);\r\n            let flag2 = that.position.every((item) => !!item.value);\r\n            if (!flag) {\r\n              this.$message.error(\"绑定id不能为空\");\r\n              return;\r\n            }\r\n            if (!flag1) {\r\n              this.$message.error(\"绑定身份不能为空\");\r\n              return;\r\n            }\r\n            if (!flag2) {\r\n              this.$message.error(\"分润占比不能为空\");\r\n              return;\r\n            }\r\n            // var formdata = this.position;\r\n            // let json = JSON.stringify(formdata);\r\n            // console.log(json);\r\n            let token = sessionStorage.getItem(\"token\");\r\n            this.token = token;\r\n            let params = {\r\n              token: sessionStorage.getItem(\"token\"),\r\n              box_name: this.goodsForm.box_name,\r\n              box_number: this.goodsForm.box_number,\r\n              position_id: this.id,\r\n              id: this.goodsForm.bind_id,\r\n              officina_id: this.goodsForm.officina_id,\r\n              position: this.position,\r\n            };\r\n            bindedit(params).then((res) => {\r\n              if (res.data.code == 200) {\r\n                this.$message.success(\"成功\");\r\n                this.$parent.getUserList();\r\n                this.close();\r\n              } else {\r\n                this.$message.error(res.data.msg);\r\n                this.$parent.getUserList();\r\n                this.close();\r\n              }\r\n            });\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.xian {\r\n  margin-left: -75px !important;\r\n}\r\n</style>\r\n"]}]}