(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bb61b23"],{1394:function(e,t,r){},5855:function(e,t,r){},ca8e:function(e,t,r){"use strict";r.r(t);var l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user"},[r("div",{staticClass:"block-quote"},[r("el-form",{ref:"form",attrs:{inline:!0}},[r("el-form-item",{attrs:{label:"在线设备数 :"}},[e._v(" "+e._s(e.count))]),r("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"投放金额 :"}},[e._v(" "+e._s(e.all_price))]),r("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"租赁商收益 :"}},[e._v(" "+e._s(e.zls_price))]),r("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"渠道商收益 :"}},[e._v(" "+e._s(e.qds_price))]),r("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"物业收益 :"}},[e._v(" "+e._s(e.gl_price))]),r("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"管理收益 :"}},[e._v(" "+e._s(e.wy_price))]),r("el-form-item",{staticStyle:{float:"right"}},[r("el-button",{attrs:{type:"primary"},on:{click:e.editData}},[e._v("添加")])],1)],1)],1),r("page-table",{ref:"dataTable",attrs:{data:e.userList},on:{changeCurrentPage:e.changeCurrent}},[r("el-table-column",{attrs:{label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s((e.page.currentPage-1)*e.page.pageSize+t.$index+1))])]}}])}),r("el-table-column",{attrs:{label:"设备租赁号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.device))])]}}])}),r("el-table-column",{attrs:{prop:"price",label:"每日分润",align:"center"}}),r("el-table-column",{attrs:{label:"点位来源",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?r("el-link",[e._v("汇置物业")]):e._e(),3==t.row.type?r("el-link",[e._v("三盛")]):e._e(),2==t.row.type?r("el-link",[e._v("宋氏集团")]):e._e(),4==t.row.type?r("el-link",[e._v("银河城")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"start_time",label:"投放开始",align:"center"}}),r("el-table-column",{attrs:{prop:"end_time",label:"投放结束",align:"center"}}),r("el-table-column",{attrs:{label:"详情",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v("租赁商"+e._s(t.row.zls)+"元,渠道商"+e._s(t.row.qds)+",物业"+e._s(t.row.wy)+",管理"+e._s(t.row.gl))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.checkPermission("userdelete")?r("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:function(r){return e.edit(t.row)}}},[e._v("编辑")]):e._e(),e.checkPermission("userdelete")?r("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger"},on:{click:function(r){return e.deleteData(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),r("edit-data",{ref:"editData"}),r("edit-fen",{ref:"editFen"})],1)},i=[],a=r("1da1"),s=(r("96cf"),r("e9c4"),r("fd03")),o=r("bade"),n=r("e3d9"),c=(r("ff82"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{staticClass:"AddDialog",attrs:{title:e.tittle,visible:e.dialogVisible,width:"800px",hegiht:"1000px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"auto"}},[r("el-row",{attrs:{gutter:15}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"设备租赁号",prop:"device"}},[r("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入设备租赁号"},model:{value:e.ruleForm.device,callback:function(t){e.$set(e.ruleForm,"device",t)},expression:"ruleForm.device"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"每日分润",prop:"price"}},[r("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入每日分润"},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"点位来源",prop:"type"}},[r("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[r("el-option",{attrs:{label:"汇置物业",value:"1"}}),r("el-option",{attrs:{label:"宋氏集团",value:"2"}})],1)],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"投放周期",prop:"time"}},[r("el-date-picker",{staticStyle:{width:"380px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.ruleForm.time,callback:function(t){e.$set(e.ruleForm,"time",t)},expression:"ruleForm.time"}})],1)],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)}),u=[],m={name:"AddDialog",components:{},data:function(){return{tittle:"",dialogVisible:!1,ruleForm:{device:"",price:"",type:"",time:""},rules:{device:[{required:!0,message:"请输入设备租赁号",trigger:"blur"}],price:[{required:!0,message:"请输入每日分润",trigger:"blur"}],type:[{required:!0,message:"请选择点位来源",trigger:"blur"}],time:[{required:!0,message:"请选择投放周期",trigger:"blur"}]}}},watch:{"ruleForm.time":function(e){null==e&&(this.ruleForm.time=[])}},created:function(){},mounted:function(){},methods:{show:function(){this.dialogVisible=!0,this.tittle="添加"},close:function(){this.dialogVisible=!1,this.ruleForm.device="",this.ruleForm.price="",this.ruleForm.type="",this.ruleForm.time=""},submitForm:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=5;break}l={token:sessionStorage.getItem("token"),device:e.ruleForm.device,price:e.ruleForm.price,type:e.ruleForm.type,start_time:e.ruleForm.time[0],end_time:e.ruleForm.time[1]},Object(s["Tb"])(l).then((function(t){200==t.data.code?(e.$message.success("新增成功"),e.$parent.getUserList(),e.close(),e.isDisable=!1):(e.$message.error(t.data.msg),e.$parent.getUserList(),e.close(),e.isDisable=!1)})),t.next=6;break;case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},p=m,d=(r("f4a3"),r("2877")),g=Object(d["a"])(p,c,u,!1,null,null,null),f=g.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{staticClass:"AddDialog",attrs:{title:e.tittle,visible:e.dialogVisible,width:"800px",hegiht:"1000px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"auto"}},[r("el-row",{attrs:{gutter:15}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"每日分润",prop:"price"}},[r("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入每日分润"},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"租赁商",prop:"zls"}},[r("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入租赁商"},model:{value:e.ruleForm.zls,callback:function(t){e.$set(e.ruleForm,"zls",t)},expression:"ruleForm.zls"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"渠道商",prop:"qds"}},[r("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入渠道商"},model:{value:e.ruleForm.qds,callback:function(t){e.$set(e.ruleForm,"qds",t)},expression:"ruleForm.qds"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"物业",prop:"wy"}},[r("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入物业"},model:{value:e.ruleForm.wy,callback:function(t){e.$set(e.ruleForm,"wy",t)},expression:"ruleForm.wy"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"管理",prop:"gl"}},[r("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入管理"},model:{value:e.ruleForm.gl,callback:function(t){e.$set(e.ruleForm,"gl",t)},expression:"ruleForm.gl"}})],1)],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},h=[],_=(r("a9e3"),{name:"AddDialog",components:{},data:function(){return{tittle:"",dialogVisible:!1,ruleForm:{gl:"",price:"",zls:"",qds:"",wy:""},rules:{gl:[{required:!0,message:"请输入管理",trigger:"blur"}],price:[{required:!0,message:"请输入每日分润",trigger:"blur"}],zls:[{required:!0,message:"请输入租赁商",trigger:"blur"}],wy:[{required:!0,message:"请输入物业",trigger:"blur"}],qds:[{required:!0,message:"请输入渠道商",trigger:"blur"}]}}},created:function(){},mounted:function(){},methods:{show:function(e){this.dialogVisible=!0,this.tittle="编辑",this.ruleForm.wy=e.wy,this.ruleForm.price=e.price,this.ruleForm.zls=e.zls,this.ruleForm.qds=e.qds,this.ruleForm.gl=e.gl,this.id=e.id},close:function(){this.dialogVisible=!1,this.ruleForm.wy="",this.ruleForm.price="",this.ruleForm.zls="",this.ruleForm.qds="",this.ruleForm.gl=""},submitForm:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var l,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=9;break}l=Number(e.ruleForm.price),i=Number(e.ruleForm.wy)+Number(e.ruleForm.zls)+Number(e.ruleForm.qds)+Number(e.ruleForm.gl),console.log("大于",l>i),console.log(l),console.log(i),l>=i?(a={token:sessionStorage.getItem("token"),wy:e.ruleForm.wy,price:e.ruleForm.price,id:e.id,zls:e.ruleForm.zls,qds:e.ruleForm.qds,gl:e.ruleForm.gl},Object(s["Vb"])(a).then((function(t){200==t.data.code?(e.$message.success("新增成功"),e.$parent.getUserList(),e.close(),e.isDisable=!1):(e.$message.error(t.data.msg),e.$parent.getUserList(),e.close(),e.isDisable=!1)}))):e.$message.error("租赁商,渠道商,物业,管理分润总和不能大于每日分润"),t.next=10;break;case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}}),v=_,F=(r("f91f"),Object(d["a"])(v,b,h,!1,null,null,null)),y=F.exports,w={name:"user",components:{pageTable:n["a"],editData:f,editFen:y},data:function(){return{count:"",all_price:"",zls_price:"",qds_price:"",gl_price:"",wy_price:"",box_uid:"",box_name:"",share:"",areaArr:[],big_name:"",value:"",value1:"",list:[],officina_id:"",province:"",city:"",area:"",eprovince:"",ecity:"",is_special:"",earea:"",userList:[],time:"",page:{currentPage:1,pageSize:10,total:0}}},watch:{},created:function(){this.getUserList()},mounted:function(){},computed:{},methods:{editData:function(){this.$refs.editData.show()},edit:function(e){var t=e;this.$refs.editFen.show(JSON.parse(JSON.stringify(t)))},deleteData:function(e){var t=this;this.$confirm("是否删除此信息？","提示",{type:"warning"}).then(Object(a["a"])(regeneratorRuntime.mark((function r(){var l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:l={id:e.id,token:sessionStorage.getItem("token")},Object(s["Ub"])(l).then((function(e){200==e.status?(t.getUserList(),t.$message.success("删除成功")):(t.$message.error(e.data.msg),t.getUserList())}));case 2:case"end":return r.stop()}}),r)})))).catch((function(){}))},checkPermission:o["a"],changeCurrent:function(e,t){this.page.currentPage=e,this.page.pageSize=t,this.getUserList()},getUserList:function(){var e=this,t=sessionStorage.getItem("token");this.token=t;var r={page:this.page.currentPage,limit:this.page.pageSize,token:sessionStorage.getItem("token")};Object(s["Wb"])(r).then((function(t){e.page.total=t.data.data.total,e.userList=t.data.data.data,e.count=t.data.title_data.count,e.all_price=t.data.title_data.all_price,e.zls_price=t.data.title_data.zls_price,e.qds_price=t.data.title_data.qds_price,e.gl_price=t.data.title_data.gl_price,e.wy_price=t.data.title_data.wy_price,e.$refs.dataTable.setPageInfo({total:e.page.total})}))}}},k=w,x=Object(d["a"])(k,l,i,!1,null,"7b4dfb10",null);t["default"]=x.exports},f4a3:function(e,t,r){"use strict";r("5855")},f91f:function(e,t,r){"use strict";r("1394")}}]);
//# sourceMappingURL=chunk-5bb61b23.72ac5677.js.map