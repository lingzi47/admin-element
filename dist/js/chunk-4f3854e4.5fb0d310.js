(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f3854e4"],{"12ad":function(e,t,l){"use strict";l("8a6c")},2409:function(e,t,l){},"2ad8":function(e,t,l){},"408a":function(e,t,l){var a=l("e330");e.exports=a(1..valueOf)},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,l){var a=l("e330"),i=l("1d80"),r=l("577e"),s=l("5899"),o=a("".replace),n="["+s+"]",u=RegExp("^"+n+n+"*"),c=RegExp(n+n+"*$"),p=function(e){return function(t){var l=r(i(t));return 1&e&&(l=o(l,u,"")),2&e&&(l=o(l,c,"")),l}};e.exports={start:p(1),end:p(2),trim:p(3)}},"615c":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user"},[l("div",{staticClass:"block-quote"},[l("el-form",{attrs:{inline:!0}},[l("el-form-item",{attrs:{label:"设备租赁号",prop:"name"}},[l("el-input",{staticStyle:{width:"180px"},attrs:{clearable:"",placeholder:"请输入设备租赁号"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),l("el-form-item",{attrs:{label:"推荐人id",prop:"use_pid"}},[l("el-input",{staticStyle:{width:"180px"},attrs:{clearable:"",placeholder:"请输入推荐人id"},model:{value:e.use_pid,callback:function(t){e.use_pid=t},expression:"use_pid"}})],1),l("el-form-item",{attrs:{label:"推荐人租赁号",prop:"pid"}},[l("el-input",{staticStyle:{width:"180px"},attrs:{clearable:"",placeholder:"请输入推荐人租赁号"},model:{value:e.pid,callback:function(t){e.pid=t},expression:"pid"}})],1),l("el-form-item",{attrs:{label:"购买服务",prop:"box_type"}},[l("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.box_type,callback:function(t){e.box_type=t},expression:"box_type"}},[l("el-option",{attrs:{label:"全部状态",value:""}}),l("el-option",{attrs:{label:"终身",value:"3"}}),l("el-option",{attrs:{label:"三年",value:"1"}}),l("el-option",{attrs:{label:"五年",value:"2"}})],1)],1),l("el-form-item",{attrs:{label:"租赁号状态",prop:"status"}},[l("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[l("el-option",{attrs:{label:"全部状态",value:""}}),l("el-option",{attrs:{label:"已绑定",value:"20"}}),l("el-option",{attrs:{label:"排队中",value:"10"}})],1)],1),l("el-form-item",{attrs:{label:"审核状态",prop:"status"}},[l("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.ex_status,callback:function(t){e.ex_status=t},expression:"ex_status"}},[l("el-option",{attrs:{label:"全部状态",value:""}}),l("el-option",{attrs:{label:"通过",value:"2"}}),l("el-option",{attrs:{label:"待审核",value:"1"}}),l("el-option",{attrs:{label:"拒绝",value:"3"}})],1)],1),l("el-form-item",{attrs:{label:"是否真实购买",prop:"status"}},[l("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.device_type,callback:function(t){e.device_type=t},expression:"device_type"}},[l("el-option",{attrs:{label:"是",value:"10"}}),l("el-option",{attrs:{label:"否",value:"20"}})],1)],1),l("el-form-item",{staticStyle:{float:"right"}},[l("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchinfo}},[e._v("搜索")]),l("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("手动添加租赁人")]),l("el-button",{on:{click:e.dao}},[e._v("导出")])],1)],1)],1),l("page-table",{ref:"dataTable",attrs:{data:e.userList},on:{changeCurrentPage:e.changeCurrent}},[l("el-table-column",{attrs:{label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s((e.page.currentPage-1)*e.page.pageSize+t.$index+1))])]}}])}),l("el-table-column",{attrs:{prop:"name",label:"设备租赁号",align:"center"}}),l("el-table-column",{attrs:{prop:"box_number",label:"设备编号",align:"center"}}),l("el-table-column",{attrs:{label:"是否真实购买",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[10==t.row.device_type?l("span",[e._v("是")]):e._e(),20==t.row.device_type?l("span",[e._v("否")]):e._e()]}}])}),l("el-table-column",{attrs:{label:"租赁人数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-link",{on:{click:function(l){return e.handleClick(t.row)}}},[e._v(e._s(t.row.count))])]}}])}),l("el-table-column",{attrs:{label:"推荐人租赁号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[null==t.row.pid?l("span",[e._v("无")]):l("span",[e._v(e._s(t.row.pid))])]}}])}),l("el-table-column",{attrs:{prop:"use_pid",label:"推荐人",align:"center"}}),l("el-table-column",{attrs:{label:"购买药柜租赁服务",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.box_type?l("span",[e._v("三年")]):e._e(),2==t.row.box_type?l("span",[e._v("五年")]):e._e(),3==t.row.box_type?l("span",[e._v("终身")]):e._e()]}}])}),l("el-table-column",{attrs:{label:"购买区域",align:"center",resizable:!1},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.box_team?l("el-link",[e._v("全国")]):e._e(),2==t.row.box_team?l("el-link",[e._v("大连")]):e._e(),3==t.row.box_team?l("el-link",[e._v("大庆")]):e._e(),4==t.row.box_team?l("el-link",[e._v("北京")]):e._e(),null==t.row.box_team?l("el-link",{attrs:{type:"danger"}},[e._v("暂无")]):e._e()]}}])}),l("el-table-column",{attrs:{prop:"queue",label:"队列编号",align:"center"}}),l("el-table-column",{attrs:{label:"审核状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.ex_status?l("el-link",{attrs:{type:"success"}},[e._v("已通过")]):e._e(),3==t.row.ex_status?l("el-link",{attrs:{type:"danger"}},[e._v("未通过")]):e._e(),1==t.row.ex_status?l("el-link",{attrs:{type:"primary"}},[e._v("待审核")]):e._e()]}}])}),l("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[20==t.row.status?l("el-link",{attrs:{type:"success"}},[e._v("已绑定")]):e._e(),10==t.row.status?l("el-link",{attrs:{type:"danger"}},[e._v("排队中")]):e._e()]}}])}),l("el-table-column",{attrs:{label:"操作",align:"center",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(l){return e.showtable(t.row)}}},[e._v("查看应急箱")]),l("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(l){return e.fenrun(t.row)}}},[e._v("商务团队信息")]),0==t.row.pid&&2==t.row.ex_status?l("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:function(l){return e.addup(1,t.row)}}},[e._v("绑定上级")]):e._e()]}}])})],1),l("el-dialog",{attrs:{title:"账户信息",visible:e.dialogVisible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[l("el-table",{ref:"dataTable",attrs:{data:e.List,border:""}},[l("el-table-column",{attrs:{label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s((e.page.currentPage-1)*e.page.pageSize+t.$index+1))])]}}])}),l("el-table-column",{attrs:{prop:"uid",label:"用户id",align:"center"}}),l("el-table-column",{attrs:{prop:"phone",label:"联系方式",align:"center"}}),l("el-table-column",{attrs:{prop:"share",label:"分润占比",align:"center"}}),l("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){return e.edit(t.row)}}},[e._v("编辑")])]}}])})],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确认")])],1)],1),l("el-dialog",{attrs:{title:"信息修改",visible:e.Visible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(t){e.Visible=t},close:e.closee}},[l("el-form",{ref:"Form",attrs:{rules:e.rules,"label-width":"auto",model:e.Form}},[l("el-row",{attrs:{gutter:24}},[l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"用户id:",prop:"uid"}},[l("el-input",{staticStyle:{width:"180px"},attrs:{disabled:"",placeholder:"请输入"},model:{value:e.Form.uid,callback:function(t){e.$set(e.Form,"uid",t)},expression:"Form.uid"}})],1)],1),l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"联系方式:",prop:"phone"}},[l("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入"},model:{value:e.Form.phone,callback:function(t){e.$set(e.Form,"phone",t)},expression:"Form.phone"}})],1)],1),l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"分润占比:",prop:"share"}},[l("el-select",{staticStyle:{width:"100px"},attrs:{disabled:"",placeholder:"请选择"},model:{value:e.Form.share,callback:function(t){e.$set(e.Form,"share",t)},expression:"Form.share"}},[l("el-option",{attrs:{label:"12.5%",value:"12.50"}}),l("el-option",{attrs:{label:"25%",value:"25.00"}}),l("el-option",{attrs:{label:"50%",value:"50.00"}}),l("el-option",{attrs:{label:"100%",value:"100.00"}})],1)],1)],1)],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.closee}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1),l("edit-data",{ref:"editData"}),l("fen-run",{ref:"fenRun"}),l("up-set",{ref:"upSet"})],1)},i=[],r=(l("b0c0"),l("e9c4"),l("fd03")),s=l("bade"),o=l("e3d9"),n=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-dialog",{staticClass:"AddDialog",attrs:{title:"新增",visible:e.dialogVisible,width:"1000px",hegiht:"1000px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[l("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"auto"}},[l("el-row",{attrs:{gutter:25}},[l("el-col",{attrs:{span:20}},[l("el-form-item",{attrs:{label:"购买类型",prop:"type"}},[l("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[l("el-option",{attrs:{label:"单人购买",value:"1"}}),l("el-option",{attrs:{label:"多人购买",value:"2"}})],1)],1)],1),l("el-col",{attrs:{span:20}},[l("el-form-item",{attrs:{label:"区域选择",prop:"box_team"}},[l("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.box_team,callback:function(t){e.$set(e.ruleForm,"box_team",t)},expression:"ruleForm.box_team"}},[l("el-option",{attrs:{label:"全国",value:"1"}}),l("el-option",{attrs:{label:"大连",value:"2"}}),l("el-option",{attrs:{label:"大庆",value:"3"}}),l("el-option",{attrs:{label:"北京",value:"4"}})],1)],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"推荐人设备租赁号",prop:"pid"}},[l("el-input",{staticStyle:{width:"180px"},attrs:{disabled:e.isDisable,placeholder:"请输入设备租赁号"},model:{value:e.ruleForm.pid,callback:function(t){e.$set(e.ruleForm,"pid",t)},expression:"ruleForm.pid"}})],1)],1),l("el-col",{attrs:{span:10}},[l("el-form-item",{staticClass:"xian"},[l("el-checkbox",{on:{change:e.checked},model:{value:e.check,callback:function(t){e.check=t},expression:"check"}},[e._v("无推荐人")])],1)],1),0!==e.ruleForm.pid?l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"推荐人id",prop:"use_pid"}},[l("el-select",{staticStyle:{width:"230px"},attrs:{clearable:"",filterable:"",placeholder:"请选择推荐人id"},model:{value:e.ruleForm.use_pid,callback:function(t){e.$set(e.ruleForm,"use_pid",t)},expression:"ruleForm.use_pid"}},e._l(e.arr,(function(e){return l("el-option",{key:e.uid,attrs:{value:e.uid,label:e.uid}})})),1)],1)],1):e._e(),l("el-col",{attrs:{span:10}},[1==e.ruleForm.type?l("el-form-item",{attrs:{label:"租赁商id",prop:"uid"}},[l("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入租赁人用户id"},model:{value:e.ruleForm.uid,callback:function(t){e.$set(e.ruleForm,"uid",t)},expression:"ruleForm.uid"}})],1):e._e()],1),l("el-col",{attrs:{span:10}},[1==e.ruleForm.type?l("el-form-item",{attrs:{label:"租赁人手机号",prop:"tel"}},[l("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入租赁人手机号"},model:{value:e.ruleForm.tel,callback:function(t){e.$set(e.ruleForm,"tel",t)},expression:"ruleForm.tel"}})],1):e._e()],1),2==e.ruleForm.type?l("el-col",{staticStyle:{"margin-left":"-57px"}},e._l(e.list,(function(t,a){return l("el-form-item",{key:a,attrs:{prop:"tel"}},[l("span",[e._v("账号"+e._s(a+1))]),e._v(" 租赁商id: "),l("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入"},model:{value:t.uid,callback:function(l){e.$set(t,"uid",l)},expression:"v.uid"}}),e._v(" 分润占比: "),l("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:t.bl,callback:function(l){e.$set(t,"bl",l)},expression:"v.bl"}},[l("el-option",{attrs:{label:"12.5%",value:"12.5"}}),l("el-option",{attrs:{label:"25%",value:"25"}}),l("el-option",{attrs:{label:"50%",value:"50"}})],1),e._v(" 手机号: "),l("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入"},on:{blur:function(l){return e.checkRight(t)}},model:{value:t.tel,callback:function(l){e.$set(t,"tel",l)},expression:"v.tel"}}),a==e.list.length-1&&a<=6?l("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini"},on:{click:e.insert}},[e._v("+")]):e._e(),1!==a&&a==e.list.length-1?l("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.remove(a)}}},[e._v("-")]):e._e()],1)})),1):e._e(),l("el-col",{attrs:{span:20}},[l("el-form-item",{attrs:{label:"购买服务",prop:"box_type"}},[l("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.box_type,callback:function(t){e.$set(e.ruleForm,"box_type",t)},expression:"ruleForm.box_type"}},[l("el-option",{attrs:{label:"三年",value:"1"}}),l("el-option",{attrs:{label:"五年",value:"2"}}),l("el-option",{attrs:{label:"终身",value:"3"}})],1)],1)],1),l("el-col",{attrs:{span:20}},[l("el-form-item",{attrs:{label:"是否真实购买",prop:"device_type"}},[l("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.device_type,callback:function(t){e.$set(e.ruleForm,"device_type",t)},expression:"ruleForm.device_type"}},[l("el-option",{attrs:{label:"是",value:"10"}}),l("el-option",{attrs:{label:"否",value:"20"}})],1)],1)],1)],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},u=[],c=l("1da1"),p=(l("96cf"),l("ac1f"),l("00b4"),l("a434"),l("99af"),l("d3b7"),l("159b"),l("a9e3"),{name:"AddDialog",components:{},data:function(){return{id:"",check:!1,token:"",arr:[],uid:"",bl:"",kshow:!0,tel:"",isDisable:!1,type:"",dialogVisible:!1,list:[{uid:"",tel:"",bl:""},{uid:"",tel:"",bl:""}],user:{uid:"",tel:"",bl:""},ruleForm:{uid:"",tel:"",use_pid:"",type:"",box_type:"",device_type:"",pid:"",box_team:""},rules:{type:[{required:!0,message:"请选择购买类型",trigger:"blur"}],use_pid:[{required:!0,message:"请选择推荐人id",trigger:"blur"}],box_team:[{required:!0,message:"请选择地区",trigger:"blur"}],uid:[{required:!0,message:"请输入租赁人用户id",trigger:"blur"}],tel:[{required:!1,message:"请输入租赁人手机号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}],box_type:[{required:!0,message:"请选择购买服务",trigger:"blur"}],device_type:[{required:!0,message:"请选择是否真实购买",trigger:"blur"}],pid:[{required:!0,message:"请输入设备租赁号",trigger:"blur"}]}}},watch:{"ruleForm.pid":function(e){console.log(e),this.huoopin()}},created:function(){},mounted:function(){},methods:{checkRight:function(e){console.log(e);var t=e.tel,l=/^1[3456789]\d{9}$/;console.log(l.test(t)),0==l.test(t)&&this.$message.error("手机号错误")},insert:function(){this.user={uid:"",tel:"",bl:""},this.list.push(this.user)},remove:function(e){this.list.splice(e,1)},huoopin:function(){var e=this,t={token:sessionStorage.getItem("token"),name:this.ruleForm.pid};Object(r["S"])(t).then((function(t){console.log(t.data.data),e.arr=t.data.data}))},show:function(e,t){this.dialogVisible=!0},close:function(){this.dialogVisible=!1,this.ruleForm.pid="",this.ruleForm.use_pid="",this.ruleForm.tel="",this.ruleForm.box_team="",this.ruleForm.box_type="",this.list=[{uid:"",tel:"",bl:""},{uid:"",tel:"",bl:""}],this.ruleForm.uid="",this.ruleForm.device_type="",this.isDisable=!1,this.check=!1},checked:function(e){this.events=e,1==e?(this.isDisable=!0,this.ruleForm.pid=0):(this.isDisable=!1,this.ruleForm.pid="")},go:function(){this.$router.back()},submitForm:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(l){var a,i,s,o,n,u,c,p,d,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!l){t.next=26;break}if(1!=e.ruleForm.type){t.next=6;break}a={token:sessionStorage.getItem("token"),uid:e.ruleForm.uid,tel:e.ruleForm.tel,box_type:e.ruleForm.box_type,pid:e.ruleForm.pid,use_pid:e.ruleForm.use_pid,device_type:e.ruleForm.device_type,box_team:e.ruleForm.box_team,str:e.ruleForm.uid.concat(",").concat(e.ruleForm.tel).concat(",").concat(100)},Object(r["h"])(a).then((function(t){200==t.data.code?(e.$message.success("新增成功"),e.$parent.getUserList(),e.close(),e.isDisable=!1,e.check=!1):(e.$message.error(t.data.msg),e.$parent.getUserList(),e.close(),e.isDisable=!1,e.check=!1)})),t.next=24;break;case 6:if(console.log(e.list),i=e,s=i.list.every((function(e){return!!e.uid})),o=i.list.every((function(e){return!!e.tel})),n=i.list.every((function(e){return!!e.bl})),s){t.next=14;break}return e.$message.error("租赁商id不能为空"),t.abrupt("return");case 14:if(o){t.next=17;break}return e.$message.error("手机号不能为空"),t.abrupt("return");case 17:if(n){t.next=20;break}return e.$message.error("分润占比不能为空"),t.abrupt("return");case 20:if(u=0,e.list.forEach((function(e){u+=Number(e.bl)})),console.log(u),100===u){for(c="",p=0;p<e.list.length;p++)c+=e.list[p].uid+","+e.list[p].tel+","+e.list[p].bl+"&&";console.log(c),d=c.substring(0,c.length-2),console.log("结果是----\x3e",d),b={token:sessionStorage.getItem("token"),uid:e.list[0].uid,tel:e.list[0].tel,box_type:e.ruleForm.box_type,pid:e.ruleForm.pid,use_pid:e.ruleForm.use_pid,device_type:e.ruleForm.device_type,box_team:e.ruleForm.box_team,str:d},Object(r["h"])(b).then((function(t){200==t.data.code?(e.$message.success("新增成功"),e.$parent.getUserList(),e.close(),e.isDisable=!1,e.check=!1):(e.$message.error(t.data.msg),e.$parent.getUserList(),e.close(),e.isDisable=!1,e.check=!1)}))}else u<=100?e.$message.error("分润占比总和不能小于100%"):e.$message.error("分润占比总和不能超过100%");case 24:t.next=27;break;case 26:return t.abrupt("return",!1);case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}}),d=p,b=(l("b6ce"),l("2877")),m=Object(b["a"])(d,n,u,!1,null,null,null),g=m.exports,h=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-dialog",{staticClass:"AddDialog",attrs:{title:"商务团队信息",visible:e.dialogVisible,width:"800px",hegiht:"1000px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[l("el-button",{staticStyle:{margin:"10px 10px 10px 10px"},attrs:{type:"primary"},on:{click:function(t){return e.go()}}},[e._v("返回")]),l("el-table",{ref:"dataTable",attrs:{data:e.userList,border:""}},[l("el-table-column",{attrs:{label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s((e.page.currentPage-1)*e.page.pageSize+t.$index+1))])]}}])}),l("el-table-column",{attrs:{prop:"box_pid_uid",label:"推荐人id",align:"center"}}),l("el-table-column",{attrs:{prop:"box_pid",label:"推荐人设备租赁号",align:"center"}}),l("el-table-column",{attrs:{prop:"box_id",label:"设备租赁号",align:"center"}}),l("el-table-column",{attrs:{label:"租赁商id",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.userinfo,(function(a,i){return l("el-link",{key:i,staticStyle:{"margin-left":"10px"},on:{click:function(l){return e.nextUser(a,t.row)}}},[e._v(e._s(a))])}))}}])})],1)],1)],1)},f=[],_=(l("25f0"),l("fb6a"),{name:"AddDialog",components:{pageTable:o["a"]},data:function(){return{name:"",uid:"",arr:[],arr1:[],box_pid_uid:"",pid:"",dialogVisible:!1,page:{currentPage:1,pageSize:10,total:0},userList:[{setid:"1",sevid:"11",uid:"2",phone:110}]}},created:function(){},mounted:function(){},methods:{nextUser:function(e,t){console.log(e),this.box_pid_uid=e,this.box_pid=t.box_id;var l=[],a=[];l.push(t.box_pid_uid),a.push(t.box_pid),this.arr.push(l),this.arr1.push(a),console.log(this.arr),console.log(this.arr1),this.getUserList()},go:function(){if(this.arr.length<1)console.log("我不显示"),this.dialogVisible=!1;else{var e=this.arr[this.arr.length-1];this.box_pid_uid=e.toString(),console.log(this.box_pid_uid);var t=this.arr1[this.arr1.length-1];this.box_pid=t.toString(),console.log(this.box_pid),this.getUserList();var l=this.arr.slice(0);l.splice(l.length-1,1);var a=this.arr1.slice(0);a.splice(a.length-1,1)}this.arr=l,this.arr1=a},show:function(e){console.log(e),this.dialogVisible=!0,this.box_pid=e.name,this.getUserList()},close:function(){this.dialogVisible=!1,this.arr=[],this.arr1=[]},changeCurrent:function(e,t){this.page.currentPage=e,this.page.pageSize=t,this.getUserList()},getUserList:function(){var e=this,t=sessionStorage.getItem("token");this.token=t;var l={token:sessionStorage.getItem("token"),box_pid:this.box_pid,box_pid_uid:this.box_pid_uid};Object(r["wd"])(l).then((function(t){e.userList=t.data.data}))},showtable:function(){}}}),v=_,x=(l("741c"),Object(b["a"])(v,h,f,!1,null,null,null)),y=x.exports,k=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-dialog",{staticClass:"AddDialog",attrs:{title:1==this.type?"绑定上级":"修改上级",visible:e.dialogVisible,width:"800px",hegiht:"1000px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[l("el-form",{ref:"goodsForm",attrs:{rules:e.rules,"label-width":"auto",model:e.goodsForm}},[l("el-row",{attrs:{gutter:24}},[l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"推荐人设备租赁号",prop:"device_num"}},[l("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入设备租赁号"},model:{value:e.goodsForm.device_num,callback:function(t){e.$set(e.goodsForm,"device_num",t)},expression:"goodsForm.device_num"}})],1)],1)],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},F=[],w={name:"AddDialog",components:{},data:function(){return{id:"",check:"",token:"",setid:"",type:"",dialogVisible:!1,goodsForm:{device_num:""},uid:"",rules:{device_num:[{required:!0,message:"请输入设备租赁号",trigger:"blur"}]}}},created:function(){},mounted:function(){},methods:{show:function(e,t){console.log(e),this.type=e,console.log(t),this.id=t.id,this.dialogVisible=!0},close:function(){this.dialogVisible=!1},go:function(){this.$router.back()},submitForm:function(){var e=this,t=sessionStorage.getItem("token");this.token=t;var l={token:sessionStorage.getItem("token"),id:this.id,device:this.device_num};Object(r["td"])(l).then((function(t){200==t.data.code?(e.$message.success("成功"),e.$parent.getUserList(),e.close()):(e.$message.error(t.data.msg),e.$parent.getUserList(),e.close())}))}}},S=w,$=(l("dc1a"),Object(b["a"])(S,k,F,!1,null,null,null)),N=$.exports,V={name:"user",components:{pageTable:o["a"],editData:g,fenRun:y,upSet:N},data:function(){return{dialogVisible:!1,Visible:!1,name:"",uid:"",pid:"",use_pid:"",box_type:"",box_name:"",status:"",ex_status:"",device_type:"",buy_time:"",userList:[],List:[],Form:{id:"",uid:"",phone:"",share:""},page:{currentPage:1,pageSize:10,total:0},rules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}],share:[{required:!0,message:"请选择分润占比",trigger:"blur"}]}}},watch:{buy_time:function(e){null==e&&(this.buy_time=[])}},created:function(){this.getUserList()},mounted:function(){},computed:{},methods:{dao:function(){window.location.href="https://y4.wjw.cool/admin/box/exportList?token="+this.token+"&name="+this.name+"&pid="+this.pid+"&box_type="+this.box_type+"&use_pid="+this.use_pid+"&status="+this.status+"&device_type="+this.device_type+"&ex_status="+this.ex_status},submit:function(){var e=this,t={id:this.Form.id,phone:this.Form.phone,share:this.Form.share,token:sessionStorage.getItem("token")};Object(r["ld"])(t).then((function(t){200==t.data.code?(e.$message.success("编辑成功"),e.closee(),e.dialogVisible=!0,e.getList()):(e.$message.error(t.data.msg),e.closee(),e.dialogVisible=!0,e.getList())}))},closee:function(){this.Form.id="",this.Form.uid="",this.Form.phone="",this.Form.share="",this.Visible=!1,this.dialogVisible=!0},edit:function(e){console.log(e),this.Form.id=e.id,this.Form.uid=e.uid,this.Form.phone=e.phone,this.Form.share=e.share,this.Visible=!0},handleClick:function(e){console.log(e),this.box_name=e.name,this.getList()},getList:function(){var e=this,t={token:sessionStorage.getItem("token"),box_name:this.box_name};Object(r["jd"])(t).then((function(t){console.log(t),e.List=t.data.data,console.log(e.List)})),this.dialogVisible=!0},submitForm:function(){this.dialogVisible=!1},close:function(){this.dialogVisible=!1},add:function(){this.$refs.editData.show(1,{})},addup:function(e,t){var l=t;this.$refs.upSet.show(1,JSON.parse(JSON.stringify(l)))},setup:function(e,t){var l=t;this.$refs.upSet.show(2,JSON.parse(JSON.stringify(l)))},fenrun:function(e){var t=e;this.$refs.fenRun.show(JSON.parse(JSON.stringify(t)))},showtable:function(e){this.$router.push({path:"/showtable",query:{row:e}})},checkPermission:s["a"],changeCurrent:function(e,t){this.page.currentPage=e,this.page.pageSize=t,this.getUserList()},searchinfo:function(){var e=this,t=sessionStorage.getItem("token");this.token=t;var l={page:1,limit:this.page.pageSize,token:sessionStorage.getItem("token"),name:this.name,pid:this.pid,box_type:this.box_type,use_pid:this.use_pid,status:this.status,ex_status:this.ex_status,device_type:this.device_type};Object(r["nb"])(l).then((function(t){e.page.total=t.data.count,e.userList=t.data.data,e.$refs.dataTable.setPageInfo({total:e.page.total})}))},getUserList:function(){var e=this,t=sessionStorage.getItem("token");this.token=t;var l={page:this.page.currentPage,limit:this.page.pageSize,token:sessionStorage.getItem("token"),name:this.name,pid:this.pid,box_type:this.box_type,use_pid:this.use_pid,status:this.status,ex_status:this.ex_status,device_type:this.device_type};Object(r["nb"])(l).then((function(t){console.log(t.data.data),e.page.total=t.data.count,e.userList=t.data.data,e.$refs.dataTable.setPageInfo({total:e.page.total})}))}}},I=V,L=Object(b["a"])(I,a,i,!1,null,"7e3a04ee",null);t["default"]=L.exports},"741c":function(e,t,l){"use strict";l("2409")},"8a6c":function(e,t,l){},"8ac6":function(e,t,l){},a9e3:function(e,t,l){"use strict";var a=l("83ab"),i=l("da84"),r=l("e330"),s=l("94ca"),o=l("6eeb"),n=l("1a2d"),u=l("7156"),c=l("3a9b"),p=l("d9b5"),d=l("c04e"),b=l("d039"),m=l("241c").f,g=l("06cf").f,h=l("9bf2").f,f=l("408a"),_=l("58a8").trim,v="Number",x=i[v],y=x.prototype,k=i.TypeError,F=r("".slice),w=r("".charCodeAt),S=function(e){var t=d(e,"number");return"bigint"==typeof t?t:$(t)},$=function(e){var t,l,a,i,r,s,o,n,u=d(e,"number");if(p(u))throw k("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=_(u),t=w(u,0),43===t||45===t){if(l=w(u,2),88===l||120===l)return NaN}else if(48===t){switch(w(u,1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+u}for(r=F(u,2),s=r.length,o=0;o<s;o++)if(n=w(r,o),n<48||n>i)return NaN;return parseInt(r,a)}return+u};if(s(v,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var N,V=function(e){var t=arguments.length<1?0:x(S(e)),l=this;return c(y,l)&&b((function(){f(l)}))?u(Object(t),l,V):t},I=a?m(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),L=0;I.length>L;L++)n(x,N=I[L])&&!n(V,N)&&h(V,N,g(x,N));V.prototype=y,y.constructor=V,o(i,v,V)}},b6ce:function(e,t,l){"use strict";l("2ad8")},bade:function(e,t,l){"use strict";l.d(t,"a",(function(){return i}));l("d3b7"),l("caad"),l("2532");var a=l("4360");function i(e){var t=a["a"].getters.permissions;if(e)if("string"===typeof e||e instanceof String){if(-1!=t.indexOf(e))return!0}else if(e instanceof Array&&e.length>0){var l=e;return t.some((function(e){return l.includes(e)}))}return!1}},dc1a:function(e,t,l){"use strict";l("8ac6")},e3d9:function(e,t,l){"use strict";var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"page-table"},[l("el-table",e._g(e._b({ref:"pageTable",attrs:{data:e.data,border:"",stripe:""}},"el-table",e.$attrs,!1),e.$listeners),[e._t("default")],2),l("div",{directives:[{name:"show",rawName:"v-show",value:e.paging,expression:"paging"}],staticClass:"page-pagination"},[l("el-pagination",e._g(e._b({attrs:{"current-page":e.currPage,"page-size":e.pageNum,total:e.totalNum,"page-sizes":[10,15,20,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.changePageSize,"current-change":e.changePageCurrent}},"el-pagination",e.$attrs,!1),e.$listeners))],1)],1)},i=[],r=(l("a9e3"),{name:"PageTable",props:{data:{type:Array,require:!0,default:function(e){return[]}},paging:{type:Boolean,default:!0},currentPage:{type:Number,default:1},pageSize:{type:Number,default:10},total:{type:Number,default:0}},data:function(){return{currPage:this.currentPage,pageNum:this.pageSize,totalNum:this.total,selectData:[]}},created:function(){},mounted:function(){},computed:{},watch:{},methods:{setPageInfo:function(e){this.totalNum=e.total},changePageSize:function(e){this.pageNum=e,this.currPage=1,this.$emit("changeCurrentPage",1,e)},changePageCurrent:function(e){this.currPage=e,this.$emit("changeCurrentPage",e,this.pageNum)}}}),s=r,o=(l("12ad"),l("2877")),n=Object(o["a"])(s,a,i,!1,null,null,null);t["a"]=n.exports}}]);
//# sourceMappingURL=chunk-4f3854e4.5fb0d310.js.map