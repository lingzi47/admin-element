(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65136a9e"],{"10ce":function(e,t,a){"use strict";a("74ef")},"152c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("div",{staticClass:"block-quote"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"审核状态",prop:"value"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.sta,callback:function(t){e.sta=t},expression:"sta"}},[a("el-option",{attrs:{value:10,label:"待审核"}}),a("el-option",{attrs:{value:20,label:"通过"}}),a("el-option",{attrs:{value:30,label:"拒绝"}})],1)],1),a("el-form-item",{attrs:{label:"时间",prop:"time"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchinfo}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加")])],1)],1)],1),a("page-table",{ref:"dataTable",attrs:{data:e.userList},on:{changeCurrentPage:e.changeCurrent}},[a("el-table-column",{attrs:{label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.page.currentPage-1)*e.page.pageSize+t.$index+1))])]}}])}),a("el-table-column",{attrs:{prop:"created_at",label:"上传时间",align:"center"}}),a("el-table-column",{attrs:{label:"项目说明",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.img,"min-width":"70",height:"70"}})]}}])}),a("el-table-column",{attrs:{prop:"updated_at",label:"审核时间",align:"center"}}),a("el-table-column",{attrs:{label:"审核状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[20==t.row.sta?a("el-link",{attrs:{type:"success"}},[e._v("已通过")]):e._e(),30==t.row.sta?a("el-link",{attrs:{type:"danger"}},[e._v("未通过")]):e._e(),10==t.row.sta?a("el-link",{attrs:{type:"primary"}},[e._v("待审核")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(a){return e.showtable(3,t.row)}}},[e._v("查看")]),20==t.row.sta||30==t.row.sta?a("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(a){return e.fenrun(2,t.row)}}},[e._v("编辑")]):e._e(),a("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除")])]}}])})],1),a("edit-data",{ref:"editData"})],1)},s=[],r=a("1da1"),n=a("ade3"),o=(a("96cf"),a("d81d"),a("b0c0"),a("e9c4"),a("fd03")),l=a("bade"),c=a("e3d9"),u=a("ff82"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"AddDialog",attrs:{title:e.tittle,visible:e.dialogVisible,width:"800px",hegiht:"1000px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"auto"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"项目说明",prop:"imageUrl"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://y4.wjw.cool/command/ossUpload?filename=file","show-file-list":!1,disabled:e.isDisable,"on-success":e.handleAvatarSuccess}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},m=[],d={name:"AddDialog",components:{},data:function(){return{id:"",ruleForm:{imageUrl:"",imageUrl2:""},isDisable:!1,imageUrl:"",tittle:"",dialogVisible:!1,rules:{imageUrl:[{required:!0,message:"请选择图片",trigger:"blur"}]}}},created:function(){},mounted:function(){},methods:{handleAvatar:function(e,t){var a=e.data;this.imageUrl2=a,this.ruleForm.imageUrl2=a},handleAvatarSuccess:function(e,t){var a=e.data;this.imageUrl=a,this.ruleForm.imageUrl=a},show:function(e,t){this.dialogVisible=!0,console.log(e),this.type=e,2==this.type?(this.tittle="编辑",console.log(t),this.ruleForm.imageUrl=t.img,this.imageUrl=t.img,this.isDisable=!1,this.id=t.id):1==this.type?(this.tittle="添加",this.isDisable=!1):(console.log(t),this.tittle="查看",this.isDisable=!0,this.ruleForm.imageUrl=t.img,this.imageUrl=t.img)},close:function(){this.dialogVisible=!1,this.ruleForm.imageUrl="",this.ruleForm.imageUrl2="",this.imageUrl="",this.imageUrl2=""},submitForm:function(){var e=this;1==this.type?this.$refs.ruleForm.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}i=sessionStorage.getItem("token"),e.token=i,s={token:sessionStorage.getItem("token"),img:e.ruleForm.imageUrl,img2:e.ruleForm.imageUrl2},Object(o["W"])(s).then((function(t){200==t.data.code?(e.$message.success("新增成功"),e.$parent.getUserList(),e.close(),e.isDisable=!1):(e.$message.error(t.data.msg),e.$parent.getUserList(),e.close(),e.isDisable=!1)})),t.next=8;break;case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):2==this.type&&this.$refs.ruleForm.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}i=sessionStorage.getItem("token"),e.token=i,s={img:e.ruleForm.imageUrl,img2:e.ruleForm.imageUrl2,token:sessionStorage.getItem("token"),id:e.id},Object(o["Y"])(s).then((function(t){200==t.data.code?(e.$message.success("编辑成功"),e.$parent.getUserList(),e.close(),e.isDisable=!1):(e.$message.error(t.data.msg),e.$parent.getUserList(),e.close(),e.isDisable=!1)})),t.next=8;break;case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},h=d,p=(a("10ce"),a("2877")),f=Object(p["a"])(h,g,m,!1,null,null,null),b=f.exports,v={name:"user",components:{pageTable:c["a"],editData:b},data:function(){var e;return e={sta:"",time:"",userList:[]},Object(n["a"])(e,"time",""),Object(n["a"])(e,"page",{currentPage:1,pageSize:10,total:0}),e},watch:{time:function(e){null==e&&(this.time=[])}},created:function(){this.getUserList(),this.setData(Object(u["a"])()),this.areaArr=Object(u["a"])()},mounted:function(){},computed:{},methods:{setData:function(e){var t=this;e.map((function(e){e["value"]=e.code,e["label"]=e.name,e.children&&t.setData(e.children)}))},change:function(e){console.log(e),this.eprovince=e[0],this.ecity=e[1],this.earea=e[2]},change1:function(e){console.log(e),this.province=e[0],this.city=e[1],this.area=e[2],this.get()},get:function(){var e=this,t={token:sessionStorage.getItem("token"),province:this.province,city:this.city,area:this.area};Object(o["Qc"])(t).then((function(t){console.log(t.data.data),e.list=t.data.data}))},add:function(){this.$refs.editData.show(1,{})},addup:function(e,t){var a=t;this.$refs.upSet.show(1,JSON.parse(JSON.stringify(a)))},editup:function(e,t){var a=t;this.$refs.upSet.show(2,JSON.parse(JSON.stringify(a)))},deleteData:function(e){var t=this;this.$confirm("确认删除此项目信息","提示",{type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.id,i={token:sessionStorage.getItem("token"),id:e.id},Object(o["X"])(i).then((function(e){200==e.data.code&&(t.getUserList(),t.$message.success("删除成功"))}));case 3:case"end":return a.stop()}}),a)})))).catch((function(){}))},fenrun:function(e,t){var a=t;this.$refs.editData.show(2,JSON.parse(JSON.stringify(a)))},showtable:function(e,t){var a=t;console.log(t),this.$refs.editData.show(3,JSON.parse(JSON.stringify(a)))},checkPermission:l["a"],changeCurrent:function(e,t){this.page.currentPage=e,this.page.pageSize=t,this.getUserList()},searchinfo:function(){var e=this,t=sessionStorage.getItem("token");this.token=t;var a={page:1,limit:this.page.pageSize,token:sessionStorage.getItem("token"),time1:this.time[0],time2:this.time[1],sta:this.sta};Object(o["Z"])(a).then((function(t){e.page.total=t.data.count,e.userList=t.data.data,e.$refs.dataTable.setPageInfo({total:e.page.total})}))},getUserList:function(){var e=this,t=sessionStorage.getItem("token");this.token=t;var a={page:this.page.currentPage,limit:this.page.pageSize,token:sessionStorage.getItem("token"),time1:this.time[0],time2:this.time[1],sta:this.sta};Object(o["Z"])(a).then((function(t){e.page.total=t.data.count,e.userList=t.data.data,e.$refs.dataTable.setPageInfo({total:e.page.total})}))}}},k=v,y=Object(p["a"])(k,i,s,!1,null,"2fcc087a",null);t["default"]=y.exports},"74ef":function(e,t,a){}}]);
//# sourceMappingURL=chunk-65136a9e.2ae91d28.js.map