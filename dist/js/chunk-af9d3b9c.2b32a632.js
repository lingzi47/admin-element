(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af9d3b9c"],{"0c18":function(e,t,a){"use strict";a("961f")},"69b8":function(e,t,a){},"77af":function(e,t,a){"use strict";a("69b8")},"8ced":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("div",{staticClass:"block-quote"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"商品编号",prop:"name"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{clearable:"",placeholder:"请输入商品编号"},model:{value:e.gid,callback:function(t){e.gid=t},expression:"gid"}})],1),a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{clearable:"",placeholder:"请输入商品名称"},model:{value:e.goods_name,callback:function(t){e.goods_name=t},expression:"goods_name"}})],1),a("el-form-item",{attrs:{label:"入库单号",prop:"name"}},[a("el-input",{staticStyle:{width:"310px"},attrs:{clearable:"",placeholder:"请输入入库单号"},model:{value:e.order_no,callback:function(t){e.order_no=t},expression:"order_no"}})],1),a("el-form-item",{attrs:{label:"标签",prop:"name"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{clearable:"",placeholder:"请输入标签"},model:{value:e.tag_name,callback:function(t){e.tag_name=t},expression:"tag_name"}})],1),a("el-form-item",{attrs:{label:"入库状态",prop:"status"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择入库状态"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[a("el-option",{attrs:{label:"全部状态",value:""}}),a("el-option",{attrs:{label:"通过",value:"2"}}),a("el-option",{attrs:{label:"待审核",value:"1"}}),a("el-option",{attrs:{label:"拒绝",value:"3"}})],1)],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchinfo}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")]),a("el-button",{attrs:{type:"danger"},on:{click:e.del}},[e._v("删除")])],1)],1)],1),a("page-table",{ref:"dataTable",attrs:{data:e.userList},on:{changeCurrentPage:e.changeCurrent,"selection-change":e.getSelection}},[a("el-table-column",{attrs:{type:"selection",fixed:"",width:"40",resizable:!1}}),a("el-table-column",{attrs:{label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.page.currentPage-1)*e.page.pageSize+t.$index+1))])]}}])}),a("el-table-column",{attrs:{prop:"number_no",width:"310px",label:"入库单号",align:"center"}}),a("el-table-column",{attrs:{prop:"remark",label:"入库备注",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{on:{change:function(a){return e.onInputChange(t.row)}},model:{value:t.row.remark,callback:function(a){e.$set(t.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),a("el-table-column",{attrs:{prop:"status",label:"入库状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("el-link",{attrs:{type:"warning"}},[e._v("待审核")]):e._e(),2==t.row.status?a("el-link",{attrs:{type:"success"}},[e._v("通过")]):e._e(),3==t.row.status?a("el-link",{attrs:{type:"danger"}},[e._v("拒绝")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"remark_sta",label:"备注",align:"center"}}),a("el-table-column",{attrs:{prop:"time_sta",label:"审核时间",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(a){return e.showtable(t.row)}}},[e._v("查看")]),2!=t.row.status?a("el-link",{staticStyle:{"margin-left":"10px"},on:{click:function(a){return e.edit(t.row)}}},[e._v("编辑")]):e._e(),a("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除")])]}}])})],1),a("edit-data",{ref:"editData"}),a("up-set",{ref:"upSet"})],1)},s=[],i=a("1da1"),o=(a("96cf"),a("d3b7"),a("25f0"),a("d81d"),a("e9c4"),a("fd03")),l=a("bade"),r=a("e3d9"),c=(a("ff82"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"AddDialog",attrs:{title:"详情",visible:e.dialogVisible,width:"1200px",hegiht:"1000px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[a("el-table",{ref:"dataTable",attrs:{border:"",data:e.userList},on:{changeCurrentPage:e.changeCurrent}},[a("el-table-column",{attrs:{label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.page.currentPage-1)*e.page.pageSize+t.$index+1))])]}}])}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称",align:"center"}}),a("el-table-column",{attrs:{prop:"type",label:"品类",align:"center"}}),a("el-table-column",{attrs:{prop:"price",label:"药品成本",align:"center"}}),a("el-table-column",{attrs:{prop:"num",label:"数量",align:"center"}}),a("el-table-column",{attrs:{prop:"sum_price",label:"总成本",align:"center"}})],1)],1)],1)}),u=[],g={name:"AddDialog",components:{pageTable:r["a"]},data:function(){return{dialogVisible:!1,page:{currentPage:1,pageSize:10,total:0},userList:[]}},created:function(){},mounted:function(){},methods:{show:function(e){console.log(e.id),this.dialogVisible=!0,console.log(e),this.id=e.id,this.getUserList()},close:function(){this.dialogVisible=!1},changeCurrent:function(e,t){this.page.currentPage=e,this.page.pageSize=t,this.getUserList()},getUserList:function(){var e=this,t=sessionStorage.getItem("token");this.token=t;var a={token:sessionStorage.getItem("token"),oid:this.id};Object(o["Md"])(a).then((function(t){e.page.total=t.data.data.total,e.userList=t.data.data.data}))},showtable:function(){}}},d=g,p=(a("77af"),a("2877")),m=Object(p["a"])(d,c,u,!1,null,null,null),h=m.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"AddDialog",attrs:{title:"入库商品信息",visible:e.dialogVisible,width:"800px",hegiht:"1000px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[a("el-form",{attrs:{"label-width":"auto"}},[a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")])],1)],1),a("el-table",{ref:"dataTable",attrs:{data:e.userList,border:""}},[a("el-table-column",{attrs:{label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.currentPage-1)*e.pageSize+t.$index+1))])]}}])}),a("el-table-column",{attrs:{prop:"id",label:"商品编号",align:"center"}}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称",align:"center"}}),a("el-table-column",{attrs:{prop:"price",label:"成本价",align:"center"}}),a("el-table-column",{attrs:{prop:"num",label:"入库数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{on:{change:function(a){return e.onInputChange(t.row)},input:function(a){return e.blurQueueExceedingNumber(t.row)}},model:{value:t.row.num,callback:function(a){e.$set(t.row,"num",a)},expression:"scope.row.num"}})]}}])}),a("el-table-column",{attrs:{prop:"sum_price",label:"成本总价",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"标签",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"danger"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1),a("el-dialog",{staticClass:"AddDialog",attrs:{title:"选择商品",visible:e.isDisable,width:"800px",hegiht:"1000px","close-on-click-modal":!1},on:{"update:visible":function(t){e.isDisable=t},close:e.closee}},[a("el-form",{attrs:{"label-width":"auto"}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"商品编号",prop:"name"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"请输入商品编号"},model:{value:e.gid,callback:function(t){e.gid=t},expression:"gid"}})],1),a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("el-input",{staticStyle:{width:"290px"},attrs:{clearable:"",placeholder:"请输入商品名称"},model:{value:e.goods_name,callback:function(t){e.goods_name=t},expression:"goods_name"}})],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchinfo}},[e._v("搜索")])],1)],1)],1),a("page-table",{ref:"dataTable",attrs:{data:e.list},on:{changeCurrentPage:e.changeCurrent1}},[a("el-table-column",{attrs:{label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.page1.Page-1)*e.page1.Size+t.$index+1))])]}}])}),a("el-table-column",{attrs:{prop:"goods_id",label:"商品编号",align:"center"}}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"标签",align:"center"}}),a("el-table-column",{attrs:{prop:"price",label:"成本价",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("el-link",{attrs:{type:"danger"}},[e._v("已入库")]):a("el-link",{attrs:{type:"success"},on:{click:function(a){return e.chu(t.row)}}},[e._v("入库")])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isDisable=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm1}},[e._v("确 定")])],1)],1)],1)},b=[],k=(a("ac1f"),a("00b4"),{name:"AddDialog",components:{pageTable:r["a"]},data:function(){return{dialogVisible:!1,isDisable:!1,userList:[],goods_name:"",gid:"",list:[],zhuid:"",currentPage:1,pageSize:10,total:0,page1:{Page:1,Size:10,count:0}}},created:function(){},mounted:function(){},methods:{blurQueueExceedingNumber:function(e){var t=e.num;(t<=0||t<="0")&&this.$message.error("入库数不能为0");var a=/^[+-]?(0|([1-9]\d*))(\.\d+)?$/g;if(!a.test(e.num))return this.$message.error("只能输入数字"),e.num="",!1},searchinfo:function(){var e=this,t=sessionStorage.getItem("token");this.token=t;var a={page:1,limit:this.page1.Size,token:sessionStorage.getItem("token"),type:1,gid:this.gid,goods_name:this.goods_name};Object(o["S"])(a).then((function(t){e.page1.count=t.data.data.total,e.list=t.data.data.data,e.$refs.dataTable.setPageInfo({total:e.page1.count})}))},checkPermission:l["a"],changeCurrent1:function(e,t){this.page1.Page=e,this.page1.Size=t,this.getlist()},add:function(){this.isDisable=!0,this.getlist()},getlist:function(){var e=this,t={page:this.page1.Page,limit:this.page1.Size,token:sessionStorage.getItem("token"),type:1,oid:this.zhuid};Object(o["S"])(t).then((function(t){console.log(t.data.data.data),e.page1.count=t.data.data.total,e.list=t.data.data.data,e.$refs.dataTable.setPageInfo({total:e.page1.count})}))},chu:function(e){var t=this;console.log(e),this.$confirm("是否入库？","提示",{type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n={token:sessionStorage.getItem("token"),gid:e.goods_id,type:1,oid:t.zhuid},Object(o["lb"])(n).then((function(e){200==e.data.code?t.$message.success("成功"):t.$message.dannger(e.data.msg),t.getlist()}));case 2:case"end":return a.stop()}}),a)})))).catch((function(){}))},onInputChange:function(e){var t=this;if(console.log(e.num),0==e.num)return this.$message.error("入库数不能为0"),void(e.num="");var a={token:sessionStorage.getItem("token"),type:1,id:e.i_id,num:e.num};Object(o["Cd"])(a).then((function(e){200==e.data.code?t.$message.success("修改成功"):t.$message.dannger(e.data.msg),t.getUserList()}))},show:function(e,t){this.dialogVisible=!0,console.log(e),this.type=e,2==this.type&&(console.log(t),this.zhuid=t.id,console.log(t.id,"外层主键id")),this.getUserList()},getUserList:function(){var e=this,t={token:sessionStorage.getItem("token"),type:1,id:this.zhuid};Object(o["rc"])(t).then((function(t){e.userList=t.data.data}))},deleteData:function(e){var t=this;console.log(e),this.$confirm("是否删除此信息？","提示",{type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n={token:sessionStorage.getItem("token"),id:e.i_id,type:1},Object(o["qc"])(n).then((function(e){200==e.data.code?t.$message.success("删除成功"):t.$message.dannger(e.data.msg),t.getUserList()}));case 2:case"end":return a.stop()}}),a)})))).catch((function(){}))},close:function(){this.dialogVisible=!1,this.isDisable=!1,this.zhuid=""},closee:function(){this.dialogVisible=!0,this.isDisable=!1,this.getUserList()},submitForm1:function(){this.dialogVisible=!0,this.isDisable=!1,this.getUserList()},submitForm:function(){var e=this;if(console.log(11),console.log(this.userList),""!=this.userList){var t=this,a=t.userList.every((function(e){return!!e.num}));if(0!=a)if(1==this.type){console.log(this.userList);var n=this.userList.map((function(e){return e.i_id})).toString();console.log(n);var s={token:sessionStorage.getItem("token"),id:n,type:1};Object(o["Nd"])(s).then((function(t){200==t.data.code?(e.$message.success("新增成功"),e.$parent.getUserList(),e.close(),e.isDisable=!1):(e.$message.error(t.data.msg),e.$parent.getUserList(),e.close(),e.isDisable=!1)}))}else{console.log(this.userList);n=this.userList.map((function(e){return e.i_id})).toString();console.log(n),console.log("修改id",this.zhuid);var i={token:sessionStorage.getItem("token"),oid:this.zhuid,id:n,type:1};Object(o["Nd"])(i).then((function(t){200==t.data.code?(e.$message.success("编辑成功"),e.$parent.getUserList(),e.close(),e.isDisable=!1):(e.$message.error(t.data.msg),e.$parent.getUserList(),e.close(),e.isDisable=!1)}))}else this.$message.error("数目不能为空")}else this.$message.error("没有商品无法操作")}}}),_=k,v=(a("0c18"),Object(p["a"])(_,f,b,!1,null,null,null)),S=v.exports,y={name:"user",components:{pageTable:r["a"],upSet:h,editData:S},data:function(){return{gid:"",goods_name:"",order_no:"",tag_name:"",status:"",userList:[],tableSelectList:[],page:{currentPage:1,pageSize:10,total:0}}},created:function(){this.token=sessionStorage.getItem("token"),this.getUserList()},mounted:function(){},computed:{},methods:{onInputChange:function(e){var t=this;console.log(e.remark);var a={token:sessionStorage.getItem("token"),type:1,id:e.id,remark:e.remark};Object(o["Ad"])(a).then((function(e){200==e.data.code?t.$message.success("修改成功"):t.$message.dannger(e.data.msg),t.getUserList()}))},getSelection:function(e){this.tableSelectList=e;var t=this.tableSelectList.map((function(e){return e.id})).toString();console.log(t)},del:function(){var e=this,t=this.tableSelectList.map((function(e){return e.id})).toString();console.log(t),this.$confirm("是否删这些信息(多删)？","提示",{type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n={token:sessionStorage.getItem("token"),id:t},Object(o["Qc"])(n).then((function(t){200==t.data.code?e.$message.success("删除成功"):e.$message.dannger(t.data.msg),e.getUserList()}));case 2:case"end":return a.stop()}}),a)})))).catch((function(){}))},dao:function(e){console.log(e),this.num=e.number,console.log(this.num),window.location.href="https://yujian02.xyz/admin/box/expOfficina?token="+this.token+"&number="+this.num},showtable:function(e){var t=e;this.$refs.upSet.show(JSON.parse(JSON.stringify(t)))},edit:function(e){var t=e;this.$refs.editData.show(2,JSON.parse(JSON.stringify(t)))},add:function(){this.$refs.editData.show(1,{})},deleteData:function(e){var t=this;console.log(e),this.$confirm("是否删除此信息？","提示",{type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n={token:sessionStorage.getItem("token"),id:e.id},Object(o["Qc"])(n).then((function(e){200==e.data.code?t.$message.success("删除成功"):t.$message.dannger(e.data.msg),t.getUserList()}));case 2:case"end":return a.stop()}}),a)})))).catch((function(){}))},checkPermission:l["a"],changeCurrent:function(e,t){this.page.currentPage=e,this.page.pageSize=t,this.getUserList()},searchinfo:function(){var e=this,t=sessionStorage.getItem("token");this.token=t;var a={page:1,limit:this.page.pageSize,token:sessionStorage.getItem("token"),type:1,gid:this.gid,goods_name:this.goods_name,order_no:this.order_no,tag_name:this.tag_name,status:this.status};Object(o["Rc"])(a).then((function(t){e.page.total=t.data.data.total,e.userList=t.data.data.data,e.$refs.dataTable.setPageInfo({total:e.page.total})}))},getUserList:function(){var e=this,t=sessionStorage.getItem("token");this.token=t;var a={page:this.page.currentPage,limit:this.page.pageSize,token:sessionStorage.getItem("token"),type:1,gid:this.gid,goods_name:this.goods_name,order_no:this.order_no,tag_name:this.tag_name,status:this.status};Object(o["Rc"])(a).then((function(t){e.page.total=t.data.data.total,e.userList=t.data.data.data,e.$refs.dataTable.setPageInfo({total:e.page.total})}))}}},w=y,$=Object(p["a"])(w,n,s,!1,null,"32fef724",null);t["default"]=$.exports},"961f":function(e,t,a){}}]);
//# sourceMappingURL=chunk-af9d3b9c.2b32a632.js.map