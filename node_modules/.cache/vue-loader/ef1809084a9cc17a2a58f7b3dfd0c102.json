{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\后台\\src\\views\\authority\\user\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\后台\\src\\views\\authority\\user\\index.vue","mtime":1651195004236},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNoZWNrUGVybWlzc2lvbiB9IGZyb20gIkAvdXRpbHMvcGVybWlzc2lvbnMiOwppbXBvcnQgeyBnZXRVc2VyTGlzdCwgZGVsZXRlVXNlciB9IGZyb20gIkAvYXBpL3VzZXIiOwppbXBvcnQgeyBnZXRSb2xlcyB9IGZyb20gIkAvYXBpL3JvbGUiOwppbXBvcnQgcGFnZVRhYmxlIGZyb20gIkAvY29tcG9uZW50cy9wYWdlVGFibGUudnVlIjsKaW1wb3J0IGFkZERpYWxvZyBmcm9tICIuL2NvbXBvbmVudHMvYWRkT3JFZGl0RGlhbG9nLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAidXNlciIsCiAgY29tcG9uZW50czogewogICAgcGFnZVRhYmxlLAogICAgYWRkRGlhbG9nLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJvbGVzTGlzdDogW10sIC8v6KeS6Imy5YiX6KGoCiAgICAgIHVzZXJMaXN0OiBbXSwgLy8g55So5oi35YiX6KGoCiAgICAgIGZvcm06IHsKICAgICAgICB1c2VybmFtZTogIiIsCiAgICAgICAgcm9sZXM6ICIiLAogICAgICB9LAogICAgICBwYWdlOiB7CiAgICAgICAgLy/liIbpobXkv6Hmga8KICAgICAgICBjdXJyZW50UGFnZTogMSwgLy/lvZPliY3pobUKICAgICAgICBwYWdlU2l6ZTogMTAsIC8v5q+P6aG15p2h5pWwCiAgICAgICAgdG90YWw6IDAsIC8v5oC75p2h5pWwCiAgICAgIH0sCiAgICAgIHRhYmxlU2VsZWN0TGlzdDogW10sIC8vIOWkmumAieWIl+ihqAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFJvbGVzTGlzdCgpOyAvL+iOt+WPluinkuiJsgogICAgdGhpcy5nZXRVc2VyTGlzdCgpOyAvL+iOt+WPlueUqOaIt+WIl+ihqAogIH0sCiAgbW91bnRlZCgpIHt9LAogIGNvbXB1dGVkOiB7CiAgICBnZXRSb2xlKCkgewogICAgICByZXR1cm4gKHJvbGUpID0+IHsKICAgICAgICByZXR1cm4gdGhpcy5yb2xlc0xpc3QuZmlsdGVyKChpdGVtKSA9PiBpdGVtLm5hbWUgPT0gcm9sZSlbMF0udGl0bGU7CiAgICAgIH07CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgY2hlY2tQZXJtaXNzaW9uLAogICAgLy8g5YiH5o2i5YiG6aG1CiAgICBjaGFuZ2VDdXJyZW50KHBhZ2UsIHNpemUpIHsKICAgICAgdGhpcy5wYWdlLmN1cnJlbnRQYWdlID0gcGFnZTsKICAgICAgdGhpcy5wYWdlLnBhZ2VTaXplID0gc2l6ZTsKICAgICAgdGhpcy5nZXRVc2VyTGlzdCgpOwogICAgfSwKICAgIC8v55uR5ZCs6KGo5qC85aSa6YCJCiAgICBnZXRTZWxlY3Rpb24oc2VsZWN0KSB7CiAgICAgIHRoaXMudGFibGVTZWxlY3RMaXN0ID0gc2VsZWN0OwogICAgfSwKICAgIGFzeW5jIGdldFJvbGVzTGlzdCgpIHsKICAgICAgbGV0IHJlcyA9IGF3YWl0IGdldFJvbGVzKCk7CiAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgIHRoaXMucm9sZXNMaXN0ID0gcmVzLmRhdGE7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBnZXRVc2VyTGlzdCgpIHsKICAgICAgbGV0IHJlcyA9IGF3YWl0IGdldFVzZXJMaXN0KE9iamVjdC5hc3NpZ24odGhpcy5wYWdlLCB0aGlzLmZvcm0pKTsKICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgdGhpcy5wYWdlLnRvdGFsID0gcmVzLnRvdGFsOwogICAgICAgIHRoaXMudXNlckxpc3QgPSByZXMuZGF0YTsKICAgICAgICB0aGlzLiRyZWZzLmRhdGFUYWJsZS5zZXRQYWdlSW5mbyh7CiAgICAgICAgICB0b3RhbDogcmVzLnRvdGFsLAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYWRkRGF0YSgpIHsKICAgICAgLy8gMTrmlrDlop7vvIwyOue8lui+kQogICAgICB0aGlzLiRyZWZzLmFkZERhdGEuc2hvdygxLCB7fSk7CiAgICB9LAogICAgZWRpdERhdGEodHlwZSwgcm93KSB7CiAgICAgIGlmICgodHlwZSA9PSAxICYmIHRoaXMudGFibGVTZWxlY3RMaXN0Lmxlbmd0aCA9PSAxKSB8fCB0eXBlID09IDIpIHsKICAgICAgICBsZXQgcm93RGF0YSA9IHR5cGUgPT0gMSA/IHRoaXMudGFibGVTZWxlY3RMaXN0WzBdIDogcm93OwogICAgICAgIC8vIDE65paw5aKe77yMMjrnvJbovpEKICAgICAgICB0aGlzLiRyZWZzLmFkZERhdGEuc2hvdygyLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJvd0RhdGEpKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCLor7fpgInmi6nkuIDmnaHmlbDmja7nvJbovpEiKTsKICAgICAgfQogICAgfSwKICAgIGRlbGV0ZURhdGEodHlwZSwgcm93KSB7CiAgICAgIGlmICgodHlwZSA9PSAxICYmIHRoaXMudGFibGVTZWxlY3RMaXN0Lmxlbmd0aCA9PSAxKSB8fCB0eXBlID09IDIpIHsKICAgICAgICB0aGlzLiRjb25maXJtKCLmmK/lkKbliKDpmaTmraTnlKjmiLfvvJ8iLCAi5o+Q56S6IiwgewogICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgIH0pCiAgICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIGxldCByb3dEYXRhID0gdHlwZSA9PSAxID8gdGhpcy50YWJsZVNlbGVjdExpc3RbMF0gOiByb3c7CiAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCBkZWxldGVVc2VyKHsKICAgICAgICAgICAgICBpZDogcm93RGF0YS5pZCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKTsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKCgpID0+IHt9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIuivt+mAieaLqeS4gOadoeaVsOaNruWIoOmZpCIpOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/authority/user","sourcesContent":["<template>\n  <div class=\"user\">\n    <div class=\"block-quote\">\n      <el-form :inline=\"true\" :model=\"form\" ref=\"form\">\n        <el-form-item label=\"账号\" prop=\"username\">\n          <el-input\n            v-model=\"form.username\"\n            clearable\n            placeholder=\"请输入账号\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"角色\" prop=\"roles\">\n          <el-select v-model=\"form.roles\" clearable placeholder=\"请选择角色\">\n            <el-option\n              v-for=\"item in rolesList\"\n              :value=\"item.name\"\n              :label=\"item.title\"\n              :key=\"item.id\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item style=\"float: right\">\n          <el-button\n            v-if=\"checkPermission('usersearch')\"\n            type=\"primary\"\n            icon=\"el-icon-search\"\n            @click=\"getUserList\"\n            >查询</el-button\n          >\n          <el-button\n            v-if=\"checkPermission('useradd')\"\n            type=\"primary\"\n            icon=\"el-icon-plus\"\n            @click=\"addData\"\n            >新增</el-button\n          >\n          <el-button\n            v-if=\"checkPermission('useredit')\"\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            @click=\"editData(1)\"\n            >编辑</el-button\n          >\n          <el-button\n            v-if=\"checkPermission('userdelete')\"\n            type=\"danger\"\n            icon=\"el-icon-delete\"\n            @click=\"deleteData(1)\"\n            >删除</el-button\n          >\n        </el-form-item>\n      </el-form>\n    </div>\n    <page-table\n      ref=\"dataTable\"\n      :data=\"userList\"\n      @changeCurrentPage=\"changeCurrent\"\n      @selection-change=\"getSelection\"\n    >\n      <el-table-column\n        type=\"selection\"\n        fixed\n        width=\"40\"\n        :resizable=\"false\"\n      ></el-table-column>\n      <el-table-column\n        type=\"index\"\n        fixed\n        width=\"40\"\n        :resizable=\"false\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"username\"\n        fixed\n        label=\"账号\"\n        width=\"90\"\n        :resizable=\"false\"\n      ></el-table-column>\n      <el-table-column label=\"用户姓名\" fixed width=\"100\" :resizable=\"false\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.name }}</span>\n          <i\n            :class=\"scope.row.sex == 0 ? 'el-icon-male' : 'el-icon-female'\"\n            style=\"margin-left: 5px; font-weight: bold\"\n            :style=\"{ color: scope.row.sex == 0 ? '#05A7F0' : '#F783BF' }\"\n          ></i>\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"phone\"\n        label=\"手机号\"\n        width=\"110\"\n        :resizable=\"false\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"birth\"\n        label=\"日期\"\n        width=\"100\"\n        :resizable=\"false\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"email\"\n        label=\"邮箱\"\n        show-overflow-tooltip\n        :resizable=\"false\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"addr\"\n        label=\"住址\"\n        show-overflow-tooltip\n        :resizable=\"false\"\n      ></el-table-column>\n      <el-table-column label=\"角色\" width=\"130\" :resizable=\"false\">\n        <template slot-scope=\"scope\">\n          <template v-for=\"(item, index) in scope.row.roles\">\n            <el-tag :key=\"index\" size=\"mini\" style=\"margin-right: 5px\">{{\n              getRole(item)\n            }}</el-tag>\n          </template>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"是否启用\" width=\"100\" :resizable=\"false\">\n        <template slot-scope=\"scope\">\n          <el-tag v-if=\"scope.row.state\" size=\"mini\" type=\"success\"\n            >启用</el-tag\n          >\n          <el-tag v-else size=\"mini\" type=\"danger\">禁用</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column\n        fixed=\"right\"\n        label=\"操作\"\n        width=\"100\"\n        :resizable=\"false\"\n        v-if=\"checkPermission(['useredit', 'userdelete'])\"\n      >\n        <template slot-scope=\"scope\">\n          <el-link\n            v-if=\"checkPermission('useredit')\"\n            type=\"primary\"\n            @click=\"editData(2, scope.row)\"\n            >编辑</el-link\n          >\n          <el-link\n            v-if=\"checkPermission('userdelete')\"\n            type=\"danger\"\n            style=\"margin-left: 10px\"\n            @click=\"deleteData(2, scope.row)\"\n            >删除</el-link\n          >\n        </template>\n      </el-table-column>\n    </page-table>\n    <!-- 新增编辑弹窗 -->\n    <add-dialog ref=\"addData\" />\n  </div>\n</template>\n\n<script>\nimport { checkPermission } from \"@/utils/permissions\";\nimport { getUserList, deleteUser } from \"@/api/user\";\nimport { getRoles } from \"@/api/role\";\nimport pageTable from \"@/components/pageTable.vue\";\nimport addDialog from \"./components/addOrEditDialog.vue\";\nexport default {\n  name: \"user\",\n  components: {\n    pageTable,\n    addDialog,\n  },\n  data() {\n    return {\n      rolesList: [], //角色列表\n      userList: [], // 用户列表\n      form: {\n        username: \"\",\n        roles: \"\",\n      },\n      page: {\n        //分页信息\n        currentPage: 1, //当前页\n        pageSize: 10, //每页条数\n        total: 0, //总条数\n      },\n      tableSelectList: [], // 多选列表\n    };\n  },\n  created() {\n    this.getRolesList(); //获取角色\n    this.getUserList(); //获取用户列表\n  },\n  mounted() {},\n  computed: {\n    getRole() {\n      return (role) => {\n        return this.rolesList.filter((item) => item.name == role)[0].title;\n      };\n    },\n  },\n  methods: {\n    checkPermission,\n    // 切换分页\n    changeCurrent(page, size) {\n      this.page.currentPage = page;\n      this.page.pageSize = size;\n      this.getUserList();\n    },\n    //监听表格多选\n    getSelection(select) {\n      this.tableSelectList = select;\n    },\n    async getRolesList() {\n      let res = await getRoles();\n      if (res.status == 200) {\n        this.rolesList = res.data;\n      }\n    },\n    async getUserList() {\n      let res = await getUserList(Object.assign(this.page, this.form));\n      if (res.status == 200) {\n        this.page.total = res.total;\n        this.userList = res.data;\n        this.$refs.dataTable.setPageInfo({\n          total: res.total,\n        });\n      }\n    },\n    addData() {\n      // 1:新增，2:编辑\n      this.$refs.addData.show(1, {});\n    },\n    editData(type, row) {\n      if ((type == 1 && this.tableSelectList.length == 1) || type == 2) {\n        let rowData = type == 1 ? this.tableSelectList[0] : row;\n        // 1:新增，2:编辑\n        this.$refs.addData.show(2, JSON.parse(JSON.stringify(rowData)));\n      } else {\n        this.$message.warning(\"请选择一条数据编辑\");\n      }\n    },\n    deleteData(type, row) {\n      if ((type == 1 && this.tableSelectList.length == 1) || type == 2) {\n        this.$confirm(\"是否删除此用户？\", \"提示\", {\n          type: \"warning\",\n        })\n          .then(async () => {\n            let rowData = type == 1 ? this.tableSelectList[0] : row;\n            let res = await deleteUser({\n              id: rowData.id,\n            });\n            if (res.status == 200) {\n              this.getUserList();\n              this.$message.success(\"删除成功\");\n            }\n          })\n          .catch(() => {});\n      } else {\n        this.$message.warning(\"请选择一条数据删除\");\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n</style>\n"]}]}