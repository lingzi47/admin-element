{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\后台\\src\\views\\user\\powermanage\\bguserlist\\components\\setRole.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\后台\\src\\views\\user\\powermanage\\bguserlist\\components\\setRole.vue","mtime":1652153986797},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\babel.config.js","mtime":1646805521000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWVudUxpc3QsIGFkZFVzZXJtZW51LCBVc2VybWVudXNob3cgYXMgX1VzZXJtZW51c2hvdyB9IGZyb20gIkAvcmVxdWVzdC9hcGkiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInNldFJvbGUiLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpZDogIiIsCiAgICAgIGRlZmF1bHRQcm9wczogewogICAgICAgIGNoaWxkcmVuOiAiY2hpbGRyZW4iLAogICAgICAgIGxhYmVsOiAibV9uYW1lIgogICAgICB9LAogICAgICBkcmF3ZXI6IGZhbHNlLAogICAgICByb2xlSW5mbzoge30sCiAgICAgIHRyZWVNZW51OiBbXSwKICAgICAgdHJlZUNoZWNrZWRLZXlzOiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7Ly8gY29uc29sZS5sb2codGhpcy50cmVlTWVudSk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgc2hvdzogZnVuY3Rpb24gc2hvdyhyb3cpIHsKICAgICAgdGhpcy5yb2xlSW5mbyA9IHJvdzsgLy8gY29uc29sZS5sb2cocm93LmlkKTsKCiAgICAgIHRoaXMuaWQgPSByb3cuaWQ7CiAgICAgIHRoaXMuZ2V0TWVudU9wZXJhdGUoKTsKICAgICAgdGhpcy5Vc2VybWVudXNob3coKTsKICAgIH0sCiAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIHRoaXMuJHJlZnMubWVudVRyZWUuc2V0Q2hlY2tlZEtleXMoW10pOwogICAgfSwKICAgIFVzZXJtZW51c2hvdzogZnVuY3Rpb24gVXNlcm1lbnVzaG93KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGlkID0gdGhpcy5pZDsKICAgICAgdmFyIHBhcmFtcyA9IHsKICAgICAgICB0b2tlbjogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKQogICAgICB9OwoKICAgICAgX1VzZXJtZW51c2hvdyhwYXJhbXMsIGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhLm1faWQpOwogICAgICAgIF90aGlzLm1pZCA9IHJlcy5kYXRhLmRhdGEubV9pZDsKICAgICAgICBfdGhpcy50cmVlQ2hlY2tlZEtleXMgPSBfdGhpcy5taWQuc3BsaXQoIiwiKTsgLy8gY29uc29sZS5sb2codGhpcy5taWQpOwogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudHJlZUNoZWNrZWRLZXlzKTsKICAgICAgfSk7CiAgICB9LAogICAgY2hhbmdlUm9sZTogZnVuY3Rpb24gY2hhbmdlUm9sZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgY2hlY2tlZEtleSA9IHRoaXMuJHJlZnMubWVudVRyZWUuZ2V0Q2hlY2tlZEtleXMoKTsgLy8gY29uc29sZS5sb2coY2hlY2tlZEtleSk7CgogICAgICB2YXIgcGVybWlzc2lvbiA9IGNoZWNrZWRLZXkuam9pbigiLCIpOyAvLyBjb25zb2xlLmxvZyhwZXJtaXNzaW9uKTsKCiAgICAgIHZhciBpZCA9IHRoaXMuaWQ7CiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgdG9rZW46IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInRva2VuIiksCiAgICAgICAgbV9pZDogcGVybWlzc2lvbgogICAgICB9OwogICAgICBhZGRVc2VybWVudShwYXJhbXMsIGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5zdWNjZXNzKCLmnYPpmZDorr7nva7miJDlip8iKTsKCiAgICAgICAgICBfdGhpczIuZHJhd2VyID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXRNZW51T3BlcmF0ZTogZnVuY3Rpb24gZ2V0TWVudU9wZXJhdGUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIHBhcmFtcyA9IHsKICAgICAgICB0b2tlbjogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKQogICAgICB9OwogICAgICBtZW51TGlzdChwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMy50cmVlTWVudSA9IHJlcy5kYXRhLmRhdGEuZGF0YTsgLy8gY29uc29sZS5sb2codGhpcy50cmVlTWVudSk7CgogICAgICAgIF90aGlzMy5kcmF3ZXIgPSB0cnVlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDoioLngrnooqvngrnlh7sKICAgIGNoZWNrQ2hhbmdlOiBmdW5jdGlvbiBjaGVja0NoYW5nZShkYXRhLCBjaGVja2VkKSB7CiAgICAgIHZhciBjaGVja2VkS2V5ID0gdGhpcy4kcmVmcy5tZW51VHJlZS5nZXRDaGVja2VkS2V5cygpOyAvLyBjb25zb2xlLmxvZyhjaGVja2VkS2V5KTsKCiAgICAgIGlmIChjaGVja2VkKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YS5pZCk7CiAgICAgICAgdmFyIHNlYXJjaElkID0gZGF0YS5pZDsKCiAgICAgICAgaWYgKGNoZWNrZWRLZXkuaW5kZXhPZihzZWFyY2hJZCkgPT0gLTEpIHsKICAgICAgICAgIGNoZWNrZWRLZXkucHVzaChzZWFyY2hJZCk7CiAgICAgICAgICB0aGlzLiRyZWZzLm1lbnVUcmVlLnNldENoZWNrZWRLZXlzKGNoZWNrZWRLZXkpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgc2VhcmNoUGFySWQgPSBkYXRhLmlkOwogICAgICAgIGNoZWNrZWRLZXkubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICBpZiAoaXRlbS5zdWJzdHJpbmcoMCwgNSkgPT0gc2VhcmNoUGFySWQpIHNlYXJjaFBhckZsYWcgPSB0cnVlOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["setRole.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA,SAAA,QAAA,EAAA,WAAA,EAAA,YAAA,IAAA,aAAA,QAAA,eAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,UAAA,EAAA,EAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,EAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA;AACA,QAAA,QAAA,EAAA,UADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAFA;AAMA,MAAA,MAAA,EAAA,KANA;AAOA,MAAA,QAAA,EAAA,EAPA;AAQA,MAAA,QAAA,EAAA,EARA;AASA,MAAA,eAAA,EAAA;AATA,KAAA;AAWA,GAfA;AAgBA,EAAA,OAhBA,qBAgBA,CACA;AACA,GAlBA;AAmBA,EAAA,OAnBA,qBAmBA,CAAA,CAnBA;AAoBA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,gBACA,GADA,EACA;AACA,WAAA,QAAA,GAAA,GAAA,CADA,CAEA;;AACA,WAAA,EAAA,GAAA,GAAA,CAAA,EAAA;AACA,WAAA,cAAA;AACA,WAAA,YAAA;AACA,KAPA;AASA,IAAA,KATA,mBASA;AACA,WAAA,KAAA,CAAA,QAAA,CAAA,cAAA,CAAA,EAAA;AACA,KAXA;AAYA,IAAA,YAZA,0BAYA;AAAA;;AACA,UAAA,EAAA,GAAA,KAAA,EAAA;AACA,UAAA,MAAA,GAAA;AACA,QAAA,KAAA,EAAA,cAAA,CAAA,OAAA,CAAA,OAAA;AADA,OAAA;;AAGA,MAAA,aAAA,CAAA,MAAA,EAAA,EAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA;AACA,QAAA,KAAA,CAAA,GAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA;AACA,QAAA,KAAA,CAAA,eAAA,GAAA,KAAA,CAAA,GAAA,CAAA,KAAA,CAAA,GAAA,CAAA,CAHA,CAIA;AACA;AACA,OANA;AAOA,KAxBA;AA0BA,IAAA,UA1BA,wBA0BA;AAAA;;AACA,UAAA,UAAA,GAAA,KAAA,KAAA,CAAA,QAAA,CAAA,cAAA,EAAA,CADA,CAEA;;AACA,UAAA,UAAA,GAAA,UAAA,CAAA,IAAA,CAAA,GAAA,CAAA,CAHA,CAIA;;AACA,UAAA,EAAA,GAAA,KAAA,EAAA;AACA,UAAA,MAAA,GAAA;AACA,QAAA,KAAA,EAAA,cAAA,CAAA,OAAA,CAAA,OAAA,CADA;AAEA,QAAA,IAAA,EAAA;AAFA,OAAA;AAIA,MAAA,WAAA,CAAA,MAAA,EAAA,EAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,QAAA;;AACA,UAAA,MAAA,CAAA,MAAA,GAAA,KAAA;AACA;AACA,OALA;AAMA,KA1CA;AA4CA,IAAA,cA5CA,4BA4CA;AAAA;;AACA,UAAA,MAAA,GAAA;AACA,QAAA,KAAA,EAAA,cAAA,CAAA,OAAA,CAAA,OAAA;AADA,OAAA;AAGA,MAAA,QAAA,CAAA,MAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CADA,CAEA;;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,IAAA;AACA,OAJA;AAKA,KArDA;AAuDA;AACA,IAAA,WAxDA,uBAwDA,IAxDA,EAwDA,OAxDA,EAwDA;AACA,UAAA,UAAA,GAAA,KAAA,KAAA,CAAA,QAAA,CAAA,cAAA,EAAA,CADA,CAEA;;AACA,UAAA,OAAA,EAAA;AACA;AACA,YAAA,QAAA,GAAA,IAAA,CAAA,EAAA;;AACA,YAAA,UAAA,CAAA,OAAA,CAAA,QAAA,KAAA,CAAA,CAAA,EAAA;AACA,UAAA,UAAA,CAAA,IAAA,CAAA,QAAA;AACA,eAAA,KAAA,CAAA,QAAA,CAAA,cAAA,CAAA,UAAA;AACA;AACA,OAPA,MAOA;AACA,YAAA,WAAA,GAAA,IAAA,CAAA,EAAA;AAEA,QAAA,UAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,CAAA,SAAA,CAAA,CAAA,EAAA,CAAA,KAAA,WAAA,EAAA,aAAA,GAAA,IAAA;AACA,SAFA;AAGA;AACA;AAzEA;AApBA,CAAA","sourcesContent":["<template>\n  <div class=\"setRole\">\n    <el-drawer\n      title=\"角色权限设置\"\n      :visible.sync=\"drawer\"\n      direction=\"rtl\"\n      @closed=\"close\"\n      :size=\"900\"\n    >\n      <div class=\"clearflex\">\n        <!-- <el-button @click=\"close\">取 消</el-button> -->\n        <el-button type=\"primary\" @click=\"changeRole\">确 定</el-button>\n      </div>\n      <el-scrollbar style=\"height: calc(100% - 40px)\">\n        <div class=\"tree-menu\">\n          <el-tree\n            ref=\"menuTree\"\n            :data=\"treeMenu\"\n            :props=\"defaultProps\"\n            show-checkbox\n            :default-expand-all=\"true\"\n            node-key=\"id\"\n            :default-checked-keys=\"treeCheckedKeys\"\n            @check-change=\"checkChange\"\n          ></el-tree>\n        </div>\n      </el-scrollbar>\n    </el-drawer>\n  </div>\n</template>\n\n<script>\nimport { menuList, addUsermenu, Usermenushow } from \"@/request/api\";\n\nexport default {\n  name: \"setRole\",\n  components: {},\n  data() {\n    return {\n      id: \"\",\n      defaultProps: {\n        children: \"children\",\n        label: \"m_name\",\n      },\n      drawer: false,\n      roleInfo: {},\n      treeMenu: [],\n      treeCheckedKeys: [],\n    };\n  },\n  created() {\n    // console.log(this.treeMenu);\n  },\n  mounted() {},\n  methods: {\n    show(row) {\n      this.roleInfo = row;\n      // console.log(row.id);\n      this.id = row.id;\n      this.getMenuOperate();\n      this.Usermenushow();\n    },\n\n    close() {\n      this.$refs.menuTree.setCheckedKeys([]);\n    },\n    Usermenushow() {\n      let id = this.id;\n      let params = {\n        token: sessionStorage.getItem(\"token\"),\n      };\n      Usermenushow(params, id).then((res) => {\n        // console.log(res.data.data.m_id);\n        this.mid = res.data.data.m_id;\n        this.treeCheckedKeys = this.mid.split(\",\");\n        // console.log(this.mid);\n        // console.log(this.treeCheckedKeys);\n      });\n    },\n\n    changeRole() {\n      let checkedKey = this.$refs.menuTree.getCheckedKeys();\n      // console.log(checkedKey);\n      let permission = checkedKey.join(\",\");\n      // console.log(permission);\n      let id = this.id;\n      let params = {\n        token: sessionStorage.getItem(\"token\"),\n        m_id: permission,\n      };\n      addUsermenu(params, id).then((res) => {\n        if (res.status == 200) {\n          this.$message.success(\"权限设置成功\");\n          this.drawer = false;\n        }\n      });\n    },\n\n    getMenuOperate() {\n      let params = {\n        token: sessionStorage.getItem(\"token\"),\n      };\n      menuList(params).then((res) => {\n        this.treeMenu = res.data.data.data;\n        // console.log(this.treeMenu);\n        this.drawer = true;\n      });\n    },\n\n    // 节点被点击\n    checkChange(data, checked) {\n      let checkedKey = this.$refs.menuTree.getCheckedKeys();\n      // console.log(checkedKey);\n      if (checked) {\n        // console.log(data.id);\n        let searchId = data.id;\n        if (checkedKey.indexOf(searchId) == -1) {\n          checkedKey.push(searchId);\n          this.$refs.menuTree.setCheckedKeys(checkedKey);\n        }\n      } else {\n        let searchParId = data.id;\n\n        checkedKey.map((item) => {\n          if (item.substring(0, 5) == searchParId) searchParFlag = true;\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep {\n  .el-drawer__body {\n    overflow: auto;\n    overflow-y: hidden;\n  }\n  .el-scrollbar__wrap {\n    overflow-x: hidden;\n  }\n}\n.clearflex {\n  padding: 0 20px;\n  *zoom: 1;\n  text-align: right;\n}\n/deep/ .tree-menu {\n  padding: 20px;\n\n  .custom-tree-node {\n    display: flex;\n    justify-content: space-between;\n    width: 100%;\n    .menu-role {\n      flex: 1;\n      text-align: right;\n    }\n  }\n  .el-tree {\n    .el-tree-node__children {\n      .el-tree-node__children {\n        padding-left: 40px;\n        .el-tree-node {\n          display: inline-block;\n          .el-tree-node__content {\n            padding: 0 20px 0 0 !important;\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/views/user/powermanage/business/components"}]}