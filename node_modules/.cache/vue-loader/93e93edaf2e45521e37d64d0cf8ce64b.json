{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\后台\\src\\views\\authority\\role\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\后台\\src\\views\\authority\\role\\index.vue","mtime":1651134821178},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNoZWNrUGVybWlzc2lvbiB9IGZyb20gIkAvdXRpbHMvcGVybWlzc2lvbnMiOwppbXBvcnQgeyBnZXRSb2xlcywgZGVsZXRlUm9sZXMgfSBmcm9tICJAL2FwaS9yb2xlIjsKaW1wb3J0IHBhZ2VUYWJsZSBmcm9tICJAL2NvbXBvbmVudHMvcGFnZVRhYmxlLnZ1ZSI7CmltcG9ydCBzZXRSb2xlIGZyb20gIi4vY29tcG9uZW50cy9zZXRSb2xlLnZ1ZSI7CmltcG9ydCBhZGRPckVkaXREaWFsb2cgZnJvbSAiLi9jb21wb25lbnRzL2FkZE9yRWRpdERpYWxvZy52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInJvbGUiLAogIGNvbXBvbmVudHM6IHsKICAgIHBhZ2VUYWJsZSwKICAgIHNldFJvbGUsCiAgICBhZGRPckVkaXREaWFsb2csCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcm9sZXNMaXN0OiBbXSwgLy/op5LoibLliJfooagKICAgICAgdGFibGVTZWxlY3RMaXN0OiBbXSwKICAgICAgZm9ybTogewogICAgICAgIHRpdGxlOiAiIiwKICAgICAgfSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRSb2xlc0xpc3QoKTsgLy/ojrflj5bop5LoibIKICB9LAogIG1vdW50ZWQoKSB7fSwKICBtZXRob2RzOiB7CiAgICBjaGVja1Blcm1pc3Npb24sCiAgICBhc3luYyBnZXRSb2xlc0xpc3QoKSB7CiAgICAgIGxldCByZXMgPSBhd2FpdCBnZXRSb2xlcyh0aGlzLmZvcm0pOwogICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICB0aGlzLnJvbGVzTGlzdCA9IHJlcy5kYXRhOwogICAgICB9CiAgICB9LAogICAgLy/nm5HlkKzooajmoLzlpJrpgIkKICAgIGdldFNlbGVjdGlvbihzZWxlY3QpIHsKICAgICAgdGhpcy50YWJsZVNlbGVjdExpc3QgPSBzZWxlY3Q7CiAgICB9LAogICAgYWRkRGF0YSgpIHsKICAgICAgdGhpcy4kcmVmcy5hZGRvcmVkaXREYXRhLnNob3coMSwge30pOyAvLyAxOuaWsOWinu+8jDI657yW6L6RCiAgICB9LAogICAgZWRpdERhdGEoKSB7CiAgICAgIGlmICh0aGlzLnRhYmxlU2VsZWN0TGlzdC5sZW5ndGggPT0gMSkgewogICAgICAgIHRoaXMuJHJlZnMuYWRkb3JlZGl0RGF0YS5zaG93KAogICAgICAgICAgMiwKICAgICAgICAgIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy50YWJsZVNlbGVjdExpc3RbMF0pKQogICAgICAgICk7IC8vIDE65paw5aKe77yMMjrnvJbovpEKICAgICAgfSBlbHNlIGlmICh0aGlzLnRhYmxlU2VsZWN0TGlzdC5sZW5ndGggPT0gMCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygi6K+36YCJ5oup5LiA5p2h5pWw5o2u57yW6L6RIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCLmmoLkuI3mlK/mjIHmibnph4/nvJbovpEiKTsKICAgICAgfQogICAgfSwKICAgIGRlbGV0ZURhdGEoKSB7CiAgICAgIGlmICh0aGlzLnRhYmxlU2VsZWN0TGlzdC5sZW5ndGggPT0gMSkgewogICAgICAgIHRoaXMuJGNvbmZpcm0oIuaYr+WQpuWIoOmZpOatpOinkuiJsu+8nyIsICLmj5DnpLoiLCB7CiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgfSkKICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IGRlbGV0ZVJvbGVzKHsKICAgICAgICAgICAgICBpZDogdGhpcy50YWJsZVNlbGVjdExpc3RbMF0uaWQsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICB0aGlzLmdldFJvbGVzTGlzdCgpOwogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKCkgPT4ge30pOwogICAgICB9IGVsc2UgaWYgKHRoaXMudGFibGVTZWxlY3RMaXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCLor7fpgInmi6nkuIDmnaHmlbDmja7liKDpmaQiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIuaaguS4jeaUr+aMgeaJuemHj+WIoOmZpCIpOwogICAgICB9CiAgICB9LAogICAgc2V0UGVybWlzc2lvbnMocm93KSB7CiAgICAgIHRoaXMuJHJlZnMuc2V0UmxvZS5zaG93KHJvdyk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/authority/role","sourcesContent":["<template>\n  <div class=\"role\">\n    <div class=\"block-quote\">\n      <el-form :inline=\"true\" ref=\"form\">\n        <el-form-item label=\"角色名称\" prop=\"title\">\n          <el-input\n            v-model=\"form.title\"\n            clearable\n            placeholder=\"请输入角色名称\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item style=\"float: right\">\n          <el-button\n            v-if=\"checkPermission('rolesearch')\"\n            type=\"primary\"\n            icon=\"el-icon-search\"\n            @click=\"getRolesList\"\n            >查询</el-button\n          >\n          <el-button\n            v-if=\"checkPermission('roleadd')\"\n            type=\"primary\"\n            icon=\"el-icon-plus\"\n            @click=\"addData\"\n            >新增</el-button\n          >\n          <el-button\n            v-if=\"checkPermission('roleedit')\"\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            @click=\"editData\"\n            >编辑</el-button\n          >\n          <el-button\n            v-if=\"checkPermission('roledelete')\"\n            type=\"danger\"\n            icon=\"el-icon-delete\"\n            @click=\"deleteData\"\n            >删除</el-button\n          >\n        </el-form-item>\n      </el-form>\n    </div>\n    <page-table\n      ref=\"dataTable\"\n      :data=\"rolesList\"\n      :paging=\"false\"\n      @selection-change=\"getSelection\"\n    >\n      <el-table-column\n        type=\"selection\"\n        fixed\n        width=\"40\"\n        :resizable=\"false\"\n      ></el-table-column>\n      <el-table-column\n        type=\"index\"\n        label=\"序号\"\n        fixed\n        width=\"50\"\n        :resizable=\"false\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"name\"\n        label=\"角色\"\n        width=\"200\"\n        :resizable=\"false\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"title\"\n        label=\"角色名称\"\n        width=\"200\"\n        :resizable=\"false\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"description\"\n        label=\"角色描述\"\n        :resizable=\"false\"\n      ></el-table-column>\n      <el-table-column\n        fixed=\"right\"\n        label=\"操作\"\n        width=\"200\"\n        :resizable=\"false\"\n        v-if=\"checkPermission('rolepermissions')\"\n      >\n        <template slot-scope=\"scope\">\n          <el-link\n            type=\"primary\"\n            :disabled=\"scope.row.id == '001' ? true : false\"\n            @click=\"setPermissions(scope.row)\"\n            >设置权限</el-link\n          >\n        </template>\n      </el-table-column>\n    </page-table>\n    <!-- 设置权限 -->\n    <set-role ref=\"setRloe\"></set-role>\n    <!-- 新增或编辑弹窗 -->\n    <addOrEdit-dialog ref=\"addoreditData\"></addOrEdit-dialog>\n  </div>\n</template>\n\n<script>\nimport { checkPermission } from \"@/utils/permissions\";\nimport { getRoles, deleteRoles } from \"@/api/role\";\nimport pageTable from \"@/components/pageTable.vue\";\nimport setRole from \"./components/setRole.vue\";\nimport addOrEditDialog from \"./components/addOrEditDialog.vue\";\nexport default {\n  name: \"role\",\n  components: {\n    pageTable,\n    setRole,\n    addOrEditDialog,\n  },\n  data() {\n    return {\n      rolesList: [], //角色列表\n      tableSelectList: [],\n      form: {\n        title: \"\",\n      },\n    };\n  },\n  created() {\n    this.getRolesList(); //获取角色\n  },\n  mounted() {},\n  methods: {\n    checkPermission,\n    async getRolesList() {\n      let res = await getRoles(this.form);\n      if (res.status == 200) {\n        this.rolesList = res.data;\n      }\n    },\n    //监听表格多选\n    getSelection(select) {\n      this.tableSelectList = select;\n    },\n    addData() {\n      this.$refs.addoreditData.show(1, {}); // 1:新增，2:编辑\n    },\n    editData() {\n      if (this.tableSelectList.length == 1) {\n        this.$refs.addoreditData.show(\n          2,\n          JSON.parse(JSON.stringify(this.tableSelectList[0]))\n        ); // 1:新增，2:编辑\n      } else if (this.tableSelectList.length == 0) {\n        this.$message.warning(\"请选择一条数据编辑\");\n      } else {\n        this.$message.warning(\"暂不支持批量编辑\");\n      }\n    },\n    deleteData() {\n      if (this.tableSelectList.length == 1) {\n        this.$confirm(\"是否删除此角色？\", \"提示\", {\n          type: \"warning\",\n        })\n          .then(async () => {\n            let res = await deleteRoles({\n              id: this.tableSelectList[0].id,\n            });\n            if (res.status == 200) {\n              this.getRolesList();\n              this.$message.success(res.message);\n            }\n          })\n          .catch(() => {});\n      } else if (this.tableSelectList.length == 0) {\n        this.$message.warning(\"请选择一条数据删除\");\n      } else {\n        this.$message.warning(\"暂不支持批量删除\");\n      }\n    },\n    setPermissions(row) {\n      this.$refs.setRloe.show(row);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n</style>\n"]}]}